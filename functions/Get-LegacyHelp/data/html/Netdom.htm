<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Netdom</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Netdom</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2003,Windows Server 2003 R2,Windows Server 2003 with SP1,Windows Server 2008 R2,Windows Server 2008</p>
				<p>Enables administrators to manage Active Directory domains and trust relationships from the command prompt.</p>
				<p>
					<b>Netdom</b> is a command-line tool that is built into Windows Server 2008 and Windows Server 2008 R2. It is available if you have the Active Directory Domain Services (AD DS) server role installed. It is also available if you install the Active Directory Domain Services Tools that are part of the Remote Server Administration Tools (RSAT). For more information, see <a href="http://go.microsoft.com/fwlink/?LinkID=177813" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">How to Administer Microsoft Windows Client and Server Computers Locally and Remotely</linktext></a> (http://go.microsoft.com/fwlink/?LinkID=177813). </p>
				<p>To use <b>netdom</b>, you must run the <b>netdom</b> command from an elevated command prompt. To open an elevated command prompt, click <b>Start</b>, right-click <b>Command Prompt</b>, and then click <b>Run as administrator</b>.</p>
				<p>You can use <b>netdom</b> to:</p>
				<ul><li class="unordered">
						Join a computer that runs Windows XP Professional, Windows Vista, or Windows 7 to a Windows Server 2008 R2, Windows Server 2008, Windows Server 2003, Windows 2000, or Windows NT 4.0 domain. <br><br>
						<ul><li class="unordered">
								Provide an option to specify the organizational unit (OU) for the computer account. <br><br>
							</li><li class="unordered">
								Generate a random computer password for an initial Join operation.<br><br>
							</li></ul>
					</li><li class="unordered">
						Manage computer accounts for domain member workstations and member servers. Management operations include: <br><br>
						<ul><li class="unordered">
								Add, Remove, Query. <br><br>
							</li><li class="unordered">
								An option to specify the OU for the computer account. <br><br>
							</li><li class="unordered">
								An option to move an existing computer account for a member workstation from one domain to another while maintaining the security descriptor on the computer account.<br><br>
							</li></ul>
					</li><li class="unordered">
						Establish one-way or two-way trust relationships between domains, including the following kinds of trust relationships: <br><br>
						<ul><li class="unordered">
								From a Windows 2000, Windows Server 2003, Windows Server 2008, or Windows Server 2008 R2 domain to a Windows NT 4.0 domain. <br><br>
							</li><li class="unordered">
								From a Windows 2000, Windows Server 2003, Windows Server 2008, or Windows Server 2008 R2 domain to a Windows 2000, Windows Server 2003, Windows Server 2008, or Windows Server 2008 R2 domain in another enterprise. <br><br>
							</li><li class="unordered">
								Between two Windows 2000, Windows Server 2003, Windows Server 2008, or Windows Server 2008 R2 domains in an enterprise (a shortcut trust). <br><br>
							</li><li class="unordered">
								The Windows Server 2008 R2, Windows Server 2008, Windows Server 2003, or Windows 2000 Server half of an interoperable Kerberos protocol realm.<br><br>
							</li></ul>
					</li><li class="unordered">
						Verify or reset the secure channel for the following configurations:<br><br>
						<ul><li class="unordered">
								Member workstations and servers. <br><br>
							</li><li class="unordered">
								Backup domain controllers (BDCs) in a Windows NT 4.0 domain. <br><br>
							</li><li class="unordered">
								Specific Windows Server 2008 R2, Windows Server 2008, Windows Server 2003, or Windows 2000 replicas.<br><br>
							</li></ul>
					</li><li class="unordered">
						Manage trust relationships between domains, including the following operations:<br><br>
						<ul><li class="unordered">
								Enumerate trust relationships (direct and indirect).<br><br>
							</li><li class="unordered">
								View and change some attributes on a trust.<br><br>
								<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/note.gif">Note </th></tr><tr><td>
									You must run <b>netdom</b> from an elevated command prompt.<p>
								</td></tr></table><p></div>
							</li></ul>
					</li></ul>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">
						<b>Netdom</b> uses the following general syntaxes:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>NetDom &lt;Operation&gt; [&lt;Computer&gt;] [{/d: | /domain:} &lt;Domain&gt;] [&lt;Options&gt;]
NetDom help &lt;Operation&gt;</pre></td></tr></table></span></div>
				</content></div><h2 class="heading">Commands</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Command
								</th>
								<th colspan="1">
									Description
								</th>
							</tr><tr>
							<td colspan="1">
								<p>
									<a href="01c8b1c0-d04f-428c-972d-426ce7f0168a.htm">Netdom add</a>
								</p>
							</td>
							<td colspan="1">
								<p>Adds a workstation or server account to the domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="556391c7-a761-47d3-997e-0a0133a92264.htm">Netdom computername</a>
								</p>
							</td>
							<td colspan="1">
								<p>Manages the primary and alternate names for a computer. This command can safely rename Active Directory domain controllers as well as member servers.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="38cfe382-a041-44f0-86ca-1e8282311a0b.htm">Netdom join</a>
								</p>
							</td>
							<td colspan="1">
								<p>Joins a workstation or member server to a domain. The act of joining a computer to a domain creates an account for the computer on the domain, if it does not already exist.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="b6cc963b-3198-458b-b215-0860e6f47063.htm">Netdom move</a>
								</p>
							</td>
							<td colspan="1">
								<p>Moves a workstation or member server to a new domain. The act of moving a computer to a new domain creates an account for the computer on the domain, if it does not already exist.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="fd77d8b3-3b0b-4a7e-a5d1-bd0538d582e6.htm">Netdom query</a>
								</p>
							</td>
							<td colspan="1">
								<p>Queries the domain for information such as membership and trust.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="689bdbf9-2e2e-4fc4-986b-0e95ede8af3a.htm">Netdom remove</a>
								</p>
							</td>
							<td colspan="1">
								<p>Removes a workstation or server from the domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="39bbaa77-c4e6-4ce6-bcfe-d5edf357f665.htm">Netdom movent4bdc</a>
								</p>
							</td>
							<td colspan="1">
								<p>Renames a Windows NT 4.0 backup domain controller to reflect a domain name change. This can assist in Windows NT 4.0 domain renaming efforts.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="11b2f2b9-883c-496c-ac88-e5969d6752c9.htm">Netdom renamecomputer</a>
								</p>
							</td>
							<td colspan="1">
								<p>Renames a domain computer and its corresponding domain account. Use this command to rename domain workstations and member servers only. To rename domain controllers, use the <b>netdom computername</b> command.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="67d17094-60ba-4bb0-b75e-e41d876e9ece.htm">Netdom reset</a>
								</p>
							</td>
							<td colspan="1">
								<p>Resets the secure connection between a workstation and a domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="ff3ba851-ed5d-46b4-af5e-94e51b8c5818.htm">Netdom resetpwd</a>
								</p>
							</td>
							<td colspan="1">
								<p>Resets the computer account password for a domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="a3dbd761-e54f-4e18-8a54-df431e114289.htm">Netdom trust</a>
								</p>
							</td>
							<td colspan="1">
								<p>Establishes, verifies, or resets a trust relationship between domains.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>
									<a href="d04072c8-b17d-4ece-b8b1-a7066d8edc54.htm">Netdom verify</a>
								</p>
							</td>
							<td colspan="1">
								<p>Verifies the secure connection between a workstation and a domain controller.</p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<ul xmlns=""><li class="unordered">
							A trust relationship is a defined affiliation between domains that enables pass-through authentication. <br><br>
						</li><li class="unordered">
							A one-way trust relationship between two domains means that one domain (the trusting domain) allows users who have accounts on the other domain (the trusted domain), access to its resources. <br><br>
						</li><li class="unordered">
							The one-way trust relationship described here is helpful in master domain models, but it is not the only kind of trust relationship. When two one-way trusts are established between domains, it is known as a two-way trust. In two-way trusts, each domain treats the users from the trusted (and trusting) domain as its own users. <br><br>
						</li><li class="unordered">
							By default, only the result of an operation is reported. For example, if you use the Join operation, you see output similar to the following:<br><br>
							<div class="code"><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>success: mywksta joined to mycompany domain</pre></td></tr></table></span></div>
						</li><li class="unordered">
							If you specify the <b>/verbose</b> parameter, the output lists the success or failure of each transaction that is necessary to perform the operation. For example, this time when you use the Join operation, you see output similar to the following:<br><br>
							<div class="code"><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>success: adding machine account for mywksta to mycompany domain
success: configuring lsa on mywksta
success: mywksta joined to mycompany domain</pre></td></tr></table></span></div>
						</li><li class="unordered">
							The <b>/reboot</b> parameter specifies that the computer being acted upon by the specified <b>netdom</b> operation is shut down and automatically rebooted after the completion of the operation. When you specify the <b>/reboot</b> parameter, the following message and a countdown timer display on the workstation screen, prior to the Restart operation:<br><br>
							<div class="code"><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>The system is shutting down. Please save
all work in progress and logoff. Any unsaved changes
will be lost. This shutdown was initiated because the
domain which this machine belongs to was changed by
<i>nnn</i>.</pre></td></tr></table></span></div>
						</li><li class="unordered">
							For <i>nnn</i>,<b> netdom</b> substitutes the name of the administrator that you enter by using the <b>/uo</b> parameter.<br><br>
						</li><li class="unordered">
							The default delay before the computer restarts is 20 seconds.<br><br>
						</li></ul>
				</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
						</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
							<h4 class="subHeading" xmlns="">Additional references</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
									<p xmlns="">
										<a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a>
									</p>
								</content></div>
						</sections></div>
				</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>