<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>W32tm</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">W32tm</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows SBS 2003,Windows Server 2003 R2,Windows 7,Windows SBS 2008,Windows Server 2008 R2 with SP1,Windows Server 2008 R2 Foundation,Windows Vista,Windows Server 2003,Microsoft Server Products,Windows Server 2003 with SP2,Windows Server 2008 Foundation,Windows Essential Business Server,Windows Server 2008 R2,Windows Server 2008,Windows HPC Server 2008 R2,Windows HPC Server 2008,Windows XP,Windows Home Server,Windows Server 2003 with SP1,Windows Server 7,Windows Home Server 2011</p>
				<p>You can use the W32tm.exe tool to configure Windows Time service (W32time) settings. You can also use W32tm.exe to diagnose problems with the time service. W32tm.exe is the preferred command-line tool for configuring, monitoring, or troubleshooting the Windows Time service. For examples of how you can use this command, see <b>Examples</b>.</p>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>W32tm &lt;/parameter&gt; &lt;/param2&gt;</pre></td></tr></table></span></div>
				</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns="">Parameters</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
							<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
										<th colspan="1">
											Parameter
										</th>
										<th colspan="1">
											Description
										</th>
									</tr><tr>
									<td colspan="1">
										<p>W32tm /?</p>
									</td>
									<td colspan="1">
										<p>
											<b>W32tm</b> command-line Help</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>W32tm /register</p>
									</td>
									<td colspan="1">
										<p>Registers the time service to run as a service, and adds default configuration to the registry.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>W32tm /unregister</p>
									</td>
									<td colspan="1">
										<p>Unregisters the time service, and removes all configuration information from the registry.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /monitor </p>
										<p>[/domain:&lt;domain name&gt;] [/computers:&lt;name&gt;[,&lt;name&gt;[,&lt;name&gt;...]]] [/threads:&lt;num&gt;]</p>
									</td>
									<td colspan="1">
										<p>
											<b>Domain</b>—Specifies which domain to monitor. If no domain name is specified, or neither the domain nor computers option is specified, the default domain is used. This option might be used more than once.</p>
										<p>
											<b>computers</b>—Monitors the given list of computers. Computer names are separated by commas, with no spaces. If a name has a prefix of a ‘*’, it is treated as a primary domain controller (PDC). You can use this option more than once.</p>
										<p>
											<b>threads</b>—Specifies the number of computers to analyze simultaneously. The default value is 3. The allowed range is 1 through 50.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /ntte &lt;NT time epoch&gt;</p>
									</td>
									<td colspan="1">
										<p>Converts a Windows NT system time, in (10^-7)s intervals from 0h 1-Jan 1601, into a readable format.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /ntpte &lt;NTP time epoch&gt;</p>
									</td>
									<td colspan="1">
										<p>Converts a Network Time Protocol (NTP) time, in (2^-32)s intervals from 0h 1-Jan 1900, into a readable format.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /resync </p>
										<p>[/computer:&lt;computer&gt;] </p>
										<p>[/nowait] </p>
										<p>[/rediscover] </p>
										<p>[/soft]</p>
									</td>
									<td colspan="1">
										<p>Tells a computer that it should resynchronize its clock as soon as possible, throwing out all accumulated error statistics. </p>
										<p>
											<b>computer:&lt;computer&gt;</b>—Specifies the computer that should resynchronize. If a computer is not specified, the local computer will resynchronize.</p>
										<p>
											<b>nowait</b>—Do not wait for the resynchronization to occur; return immediately. Otherwise, wait for the resynchronization to complete before returning.</p>
										<p>
											<b>rediscover</b>—Redetect the network configuration and rediscover network sources; then, resynchronize.</p>
										<p>
											<b>soft</b>—This option is only provided for compatibility with older time servers and will resynchronize using existing error statistics..</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /stripchart </p>
										<p>/computer:&lt;target&gt;</p>
										<p>[/period:&lt;refresh&gt;] </p>
										<p>[/dataonly] </p>
										<p>[/samples:&lt;count&gt;]</p>
										<p>[/packetinfo]</p>
										<p>[ipprotocol:&lt;4|6&gt;</p>
									</td>
									<td colspan="1">
										<p>Displays a strip chart of the offset between this computer and another computer.</p>
										<p>
											<b>computer:&lt;target&gt;</b>—The computer to measure the offset against.</p>
										<p>
											<b>period:&lt;refresh&gt;</b>—The time between samples, in seconds. The default value is 2 seconds.</p>
										<p>
											<b>Dataonly</b>—Display only the data, without graphics.</p>
										<p>
											<b>samples:&lt;count&gt;</b>—Collect <b>&lt;count&gt;</b> samples; then, stop. If a value is not specified, samples will be collected until the user types <b>Ctrl+C</b> is pressed.</p>
										<p>
											<b>packetinfo</b>—Print out NTP packet response message.</p>
										<p>
											<b>Ipprotocol</b>—Specify the IP protocol to use. The default is to use whatever is available.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /config </p>
										<p>[/computer:&lt;target&gt;] </p>
										<p>[/update]</p>
										<p>[/manualpeerlist:&lt;peers&gt;] </p>
										<p>[/syncfromflags:&lt;source&gt;]</p>
										<p>[/LocalClockDispersion:&lt;seconds&gt;]</p>
										<p>[/reliable:(YES|NO)]</p>
										<p>[/largephaseoffset:&lt;milliseconds&gt;]</p>
									</td>
									<td colspan="1">
										<p>
											<b>computer:&lt;target&gt;</b>—Adjusts the configuration of <b>&lt;target&gt;</b>. If a value is not specified, the default is the local computer.</p>
										<p>
											<b>update</b>—Notifies the time service that the configuration has changed, causing the changes to take effect.</p>
										<p>
											<b>manualpeerlist:&lt;peers&gt;</b>—Sets the manual peer list to <b>&lt;peers&gt;</b>, which is a space-delimited list of Domain Name System (DNS) and/or IP addresses. When you are specifying multiple peers, this option must be enclosed in quotation marks (“).</p>
										<p>
											<b>syncfromflags:&lt;source&gt;</b>—Sets what sources the NTP client should synchronize from. <b>&lt;source&gt;</b> should be a comma-separated list of these keywords (not case sensitive):</p>
										<ul><li>
												
													<b>MANUAL</b>— Include peers from the manual peer list.<br><br>
											</li><li>
												
													<b>DOMHIER</b>— Synchronize from a domain controller in the domain hierarchy.<br><br>
											</li><li>
												
													<b>NO</b>—Do not synchronize from any server.<br><br>
											</li><li>
												
													<b>ALL</b>—Synchronize from both manual and domain peers.<br><br>
											</li></ul>
										<p>
											<b>LocalClockDispersion:&lt;seconds&gt;</b>—Configures the accuracy of the internal clock that W32time will assume when it cannot acquire time from its configured sources.</p>
										<p>
											<b>reliable:(YES|NO)</b>—Set whether this computer is a reliable time source.</p>
										<p>This setting is meaningful only on domain controllers.</p>
										<ul><li>
												
													<b>YES</b>—This computer is a reliable time service.<br><br>
											</li><li>
												
													<b>NO</b>—This computer is not a reliable time service.<br><br>
											</li></ul>
										<p>
											<b>largephaseoffset:&lt;milliseconds&gt;</b>—Sets the time difference between local time and network time that W32time will consider to be a spike. </p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /tz</p>
									</td>
									<td colspan="1">
										<p>Displays the current time zone settings.</p>
									</td>
								</tr><tr>
									<td colspan="1">
										<p>w32tm /dumpreg </p>
										<p>[/subkey:&lt;key&gt;] </p>
										<p>[/computer:&lt;target&gt;]</p>
									</td>
									<td colspan="1">
										<p>Displays the values that are associated with a given registry key.</p>
										<p>The default key is <b>HKLM\System\CurrentControlSet\Services\W32Time</b></p>
										<p>(the root key for the time service).</p>
										<p>
											<b>subkey:&lt;key&gt;</b>—Displays the values that are associated with <b>subkey &lt;key&gt;</b> of the default key.</p>
										<p>
											<b>computer:&lt;target&gt;</b>—Queries registry settings for computer <b>&lt;target&gt;</b>.</p>
									</td>
								</tr><tr>
									<td>
										<p>w32tm /query [/computer:&lt;target&gt;] {/source | /configuration | /peers | /status} [/verbose]</p>
									</td>
									<td>
										<p>This parameter was first made available in the Windows Time client versions of Windows Vista, and Windows Server 2008.</p>
										<p>Displays a computer's Windows Time service information.</p>
										<p>
											<b>computer:&lt;target&gt;</b>—Query the information of <b>&lt;target&gt;</b>. If a value is not specified, the default value is the local computer.</p>
										<p>
											<b>source</b>—Display the time source.</p>
										<p>
											<b>configuration</b>—Display the configuration of run time and where the setting comes from. In verbose mode, display the undefined or unused setting also.</p>
										<p>
											<b>peers</b>—Display a list of peers and their status.</p>
										<p>
											<b>status</b>—Display Windows Time service status.</p>
										<p>
											<b>verbose</b>—Set the verbose mode to display more information.</p>
									</td>
								</tr><tr>
									<td>
										<p>w32tm /debug {/disable | {/enable /file:&lt;name&gt; /size:&lt;bytes&gt; /entries:&lt;value&gt; [/truncate]}}</p>
									</td>
									<td>
										<p>This parameter was first made available in the Windows Time client versions of Windows Vista and Windows Server 2008.</p>
										<p>Enables or disables local computer Windows Time service private log.</p>
										<p>
											<b>disable</b>—Disable the private log.</p>
										<p>
											<b>enable</b>—Enable the private log.</p>
										<ul><li>
												
													<b>file:&lt;name&gt;</b>—Specify the absolute file name.<br><br>
											</li><li>
												
													<b>size:&lt;bytes&gt;</b>—Specify the maximum size for circular logging.<br><br>
											</li><li>
												
													<b>entries:&lt;value&gt;</b>—Contains a list of flags, specified by number and separated by commas, that specify the types of information that should be logged. Valid numbers are 0 to 300. A range of numbers is valid, in addition to single numbers, such as 0 through 100,103,106. Value 0-300 is for logging all information.<br><br>
											</li></ul>
										<p>
											<b>truncate</b>—Truncate the file if it exists.</p>
									</td>
								</tr></table>
						</content></div>
				</sections></div><h2 class="heading">Remarks</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">The Windows Time service is not a full-featured NTP solution that meets time-sensitive application needs, and it is not supported by Microsoft as such. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkID=179459" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">article 939322</linktext></a> in the Microsoft Knowledge Base (http://go.microsoft.com/fwlink/?LinkID=179459).</p>
					<p xmlns="">If you have questions about the Windows Time service, please post them to the <a href="http://go.microsoft.com/fwlink/?LinkId=195451" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">Directory Services forum</linktext></a> (http://go.microsoft.com/fwlink/?LinkId=195451).</p>
				</content></div><a name="BKMK_Examples"></a><a name="04cf7d3a-b787-4dfe-ac57-53e9000fbc6b#BKMK_Examples"></a><h2 class="heading">Examples</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">If you want to set the local Windows Time client to point to two different time servers, one named ntpserver.contoso.com and another named clock.adatum.com, type the following command at the command line, and then press ENTER:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>w32tm /config /manualpeerlist:ntpserver.contoso.com,clock.adatum.com /syncfromflags:manual /update</pre></td></tr></table></span></div>
					<p xmlns="">For a list of valid NTP servers that are available on the Internet for external time synchronization, see  <a href="http://go.microsoft.com/fwlink/?LinkID=60401" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">article 262680</linktext></a> in the Microsoft Knowledge Base (http://go.microsoft.com/fwlink/?LinkID=60401).</p>
					<p xmlns="">If you want to check the Windows Time client configuration from a client computer running Windows 7 that has a host name of CONTOSOW1, run the following command: </p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>W32tm /query /computer:contosoW1 /configuration</pre></td></tr></table></span></div>
					<p xmlns="">The output of this command is a list of configuration parameters that are set for the Windows Time client.</p>
				</content></div><h2 class="heading">Additional references</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<ul xmlns=""><li>
							
								<a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a>
							<br><br>
						</li><li>
							
								<b>Windows Time Service Technical Reference</b>
							<br><br>
						</li></ul>
				</content></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>