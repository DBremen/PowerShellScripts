<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Dcpromo</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Dcpromo</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2003 with SP1,Windows Server 2008 R2,Windows Server 2008,Windows Server 2003 R2,Windows Server 2003</p>
				<p>Installs and removes Active Directory Domain Services (AD DS).</p>
				<p>For examples of how to use <b>dcpromo</b>, see <a href="#BKMK_EXAMPLES">Examples</a>. </p>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>dcpromo [/answer[:&lt;filename&gt;] | /unattend[:&lt;filename&gt;] | /unattend | /adv] /uninstallBinaries [/CreateDCAccount | /UseExistingAccount:Attach] /? /?[:{Promotion | CreateDCAccount | UseExistingAccount | Demotion}]</pre></td></tr></table></span></div>
				</content></div><h2 class="heading">Dcpromo.exe parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter
								</th>
								<th colspan="1">
									Description
								</th>
							</tr><tr>
							<td colspan="1">
								<p>/answer[:&lt;filename&gt;]</p>
							</td>
							<td colspan="1">
								<p>Specifies an answer file that contains installation parameters and values.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/unattend[:&lt;filename&gt;]</p>
							</td>
							<td colspan="1">
								<p>Specifies an answer file that contains installation parameters and values. This command provides the same function as /answer[:&lt;filename&gt;].</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/unattend</p>
							</td>
							<td colspan="1">
								<p>Specifies an unattended installation in which you provide installation parameters and values at the command line.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/adv</p>
							</td>
							<td colspan="1">
								<p>Performs an install from media (IFM) operation.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/UninstallBinaries</p>
							</td>
							<td colspan="1">
								<p>Uninstalls AD DS binaries.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/CreateDCAccount</p>
							</td>
							<td colspan="1">
								<p>Creates a read-only domain controller (RODC) account. Only a member of the Domain Admins group or the Enterprise Admins group can run this command. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/UseExistingAccount:Attach</p>
							</td>
							<td colspan="1">
								<p>Attaches a server to an existing RODC account. A member of the Domain Admins group or a delegated user can run this command.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/?</p>
							</td>
							<td colspan="1">
								<p>Displays Help for Dcpromo parameters.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/?[:{Promotion | CreateDCAccount | UseExistingAccount | Demotion}]</p>
							</td>
							<td colspan="1">
								<p>Displays parameters that apply to the dcpromo operation. For example, <b>dcpromo /?:Promotion</b> displays all of the parameters that you can use for a promotion operation.</p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">dcpromo Promotion operation parameters</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">The following table shows the parameters that you can specify at a command prompt as part of an unattended installation of a domain controller that runs Windows Server 2008. </p>
					<p xmlns="">For more information about creating a new forest, see Installing a New Windows Server 2008 Forest (<a href="http://go.microsoft.com/fwlink/?LinkId=133255" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133255</linktext></a>).</p>
					<p xmlns="">For more information about creating a new domain, see Installing a New Windows Server 2008 Child Domain (<a href="http://go.microsoft.com/fwlink/?LinkId=133256" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133256</linktext></a>).</p>
					<p xmlns="">For more information about creating a new domain tree, see Installing a New Windows Server 2008 Domain Tree (<a href="http://go.microsoft.com/fwlink/?LinkId=133257" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133257</linktext></a>).</p>
					<p xmlns="">For more information about creating an additional domain controller for a domain, see Installing an Additional Windows Server 2008 Domain Controller (<a href="http://go.microsoft.com/fwlink/?LinkId=133258" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133258</linktext></a>).</p>
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter:value
								</th>
								<th colspan="1">
									Description and default
								</th>
							</tr><tr>
							<td colspan="1">
								<p>AllowDomainControllerReinstall:{Yes | &lt;No&gt; | NoAndNoPromptEither}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to continue installing this domain controller, despite the fact that another domain controller account with the same name is detected. </p>
								<p>Use <b>Yes</b> only if you are sure that the account is not currently used by another domain controller.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>AllowDomainReinstall:{Yes | &lt;No&gt; | NoAndNoPromptEither}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether an existing domain is recreated.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ApplicationPartitionsToReplicate:""</p>
							</td>
							<td colspan="1">
								<p>Specifies the application directory partitions that <b>dcpromo</b> will replicate. Use the following format:</p>
								<p>
									<b>"partition1" "partition2" "partitionN"</b>
								</p>
								<p>Use <b>*</b> to replicate all application directory partitions.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>AutoConfigDNS:{Yes | No}</p>
								<p>This parameter has been renamed to InstallDNS.</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the DNS Server service should be installed. The default is automatically computed based on the environment. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ChildName:"child_domain_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the single-label Domain Name System (DNS) name of the child domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ConfirmGc:{Yes | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether you want the domain controller to be a global catalog server.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>CreateDNSDelegation: { Yes | No}</p>
							</td>
							<td colspan="1">
								<p>Indicates whether to create a DNS delegation that references the new DNS server that you are installing along with the domain controller. Valid for Active Directory–integrated DNS only.</p>
								<p>The default is computed automatically based on the environment. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>CriticalReplicationOnly:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the AD DS installation operation performs only critical replication before reboot and then continues, skipping the noncritical (and potentially lengthy) portion of replication. The noncritical replication happens after the installation finishes and the computer reboots.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DatabasePath:"path_to_database_files" </p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non–Universal Naming Convention (UNC) path to a directory on a fixed disk of the local computer that contains the domain database, for example, <b>C:\Windows\NTDS</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\NTDS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DelegatedAdmin:"name of user or group"</p>
							</td>
							<td colspan="1">
								<p>Specifies the name of the user or group that will install and administer the RODC.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSDelegationPassword:"password"</p>
							</td>
							<td colspan="1">
								<p>Specifies the password for the user name (account credentials) for creating DNS delegation.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSDelegationUserName:"user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name (account credentials) for creating DNS delegation.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSOnNetwork:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether DNS service is available on the network. This parameter is used only when the IP setting of the network adapter for this computer is not configured with the name of a DNS server for name resolution. <b>No</b> indicates that a DNS server will be installed on this computer for name resolution. Otherwise, the IP settings of the network adapter must be configured with a DNS server name first.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DomainLevel:{0 | 2 | 3 | 4} </p>
							</td>
							<td colspan="1">
								<p>Specifies the domain functional level during the creation of a new domain. A value of <b>0</b> specifies Windows 2000. A value of <b>2</b> specifies Windows Server 2003. A value of <b>3</b> specifies Windows Server 2008. A value of <b>4</b> specifies Windows Server 2008 R2.</p>
								<p>The domain functional level cannot be lower than the forest functional level, but it can be higher. </p>
								<p>The default is automatically computed and set to the existing forest functional level or the value that is set for <b>/ForestLevel</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DomainNetBiosName:"domain_NetBIOS_name"</p>
							</td>
							<td colspan="1">
								<p>Assigns a NetBIOS name to the new domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ForestLevel:{&lt;0&gt; | &lt;2&gt; | 3 | 4} </p>
							</td>
							<td colspan="1">
								<p>Specifies the forest functional level when you create a new forest. A value of <b>0</b> specifies Windows 2000. A value of <b>2</b> specifies Windows Server 2003. A value of <b>3</b> specifies Windows Server 2008. A value of <b>4</b> specifies Windows Server 2008 R2.</p>
								<p>The default forest functional level in Windows Server 2008 when you create a new forest is Windows 2000 (<b>0</b>). </p>
								<p>The default forest functional level in Windows Server 2008 R2 when you create a new forest is Windows Server 2003 (<b>2</b>). </p>
								<p>Do not use this parameter when you install a domain controller in an existing forest.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>InstallDNS:{Yes | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the DNS Server service should be installed. The default is automatically computed based on the environment. This parameter replaces <b>AutoConfigDNS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>LogPath:"path_to_log_files"</p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non-UNC path to a directory on a fixed disk of the local computer that contains the domain log files, for example, <b>C:\Windows\Logs</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\NTDS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>NewDomain:{Tree | Child | &lt;Forest&gt;}</p>
							</td>
							<td colspan="1">
								<p>Indicates the type of domain that you want to create: a new domain tree in an existing forest, a child of an existing domain, or a new forest.</p>
								<p>The default is new forest.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>NewDomainDNSName:"DNS_name_of_domain"</p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified domain name (FQDN) for the new domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ParentDomainDNSName:"DNS_name_of_domain"</p>
							</td>
							<td colspan="1">
								<p>Specifies the FQDN of an existing parent domain. You use this parameter when you install a child domain.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Password:"password"</p>
							</td>
							<td colspan="1">
								<p>Specifies the password that corresponds to the user name (account credentials) that is used to install the domain controller. Use this parameter in conjunction with the <b>UserName</b> parameter.</p>
								<p>Use <b>*</b> to prompt the user to supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>PasswordReplicationAllowed:{"security_principal" | None}</p>
							</td>
							<td colspan="1">
								<p>Specifies the names of user accounts, group accounts, and computer accounts whose passwords can be replicated to this RODC. Use <b>None</b> if you want to keep the value empty. By default, only the Allowed RODC Password Replication Group is allowed, and it is originally created empty.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>PasswordReplicationDenied:{"security_principal" | None}</p>
							</td>
							<td colspan="1">
								<p>Specifies the names of user accounts, group accounts, and computer accounts whose passwords are not to be replicated to this RODC. Use <b>None</b> if you do not want to deny the replication of credentials of any users or computers. By default, Administrators, Server Operators, Backup Operators, Account Operators, and the Denied RODC Password Replication Group are denied. By default, the Denied RODC Password Replication Group includes Cert Publishers, Domain Admins, Enterprise Admins, Enterprise Domain Controllers, Enterprise Read-Only Domain Controllers, Group Policy Creator Owners, the krbtgt account, and Schema Admins.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnCompletion:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon completion of the command, regardless of success.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnSuccess:{&lt;Yes&gt; | No | NoAndNoPromptEither}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon successful completion of the command.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicaDomainDNSName:"DNS_name_of_domain"</p>
							</td>
							<td colspan="1">
								<p>Specifies the FQDN of the domain in which you want to install an additional domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicaOrNewDomain:{&lt;Replica&gt; | ReadOnlyReplica | Domain}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to install an additional domain controller (a writable domain controller or an RODC) or to create a new domain.</p>
								<p>The default is to install an additional writable domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicationSourceDC:"DNS_name_of_DC"</p>
							</td>
							<td colspan="1">
								<p>Indicates the FQDN of the partner domain controller from which you replicate the domain information.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicationSourcePath:"replication_source_path"</p>
							</td>
							<td colspan="1">
								<p>Indicates the location of the installation media that will be used to install a new domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SafeModeAdminPassword:"password" </p>
							</td>
							<td colspan="1">
								<p>Supplies the password for the administrator account when the computer is started in Safe Mode or a variant of Safe Mode, such as Directory Services Restore Mode.</p>
								<p>The default is an empty password. You must supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SiteName:"site_name" </p>
							</td>
							<td colspan="1">
								<p>Specifies the name of an existing site where you can place the new domain controller.</p>
								<p>The default value depends on the type of installation. For a new forest, the default is Default-First-Site-Name. For all other installations, the default is the site that is associated with the subnet that includes the IP address of this server. If no such site exists, the default is the site of the replication source domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SkipAutoConfigDns</p>
							</td>
							<td colspan="1">
								<p>Skips automatic configuration of DNS client settings, forwarders, and root hints. This parameter is in effect only if the DNS Server service is already installed.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Syskey:{&lt;none&gt; | system key}</p>
							</td>
							<td colspan="1">
								<p>Specifies the system key for the media from which you replicate the data.</p>
								<p>The default is <b>none</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SysVolPath:"path_to_database_file" </p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non-UNC path to a directory on a fixed disk of the local computer, for example, <b>C:\Windows\SYSVOL</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\SYSVOL</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>TransferIMRoleIfNecessary:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to transfer the infrastructure master operations master role (also known as flexible single master operations or FSMO) to the domain controller that you are creating—in case it is currently hosted on a global catalog server—and you do not plan to make the domain controller that you are creating a global catalog server. Use <b>Yes</b> to transfer the infrastructure master role to the domain controller that you are creating in case the transfer is needed; in this case, make sure to use <b>/ConfirmGC:No</b>. Use <b>No</b> if you want the infrastructure master role to remain where it currently is.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserDomain:"domain_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the domain name for the user name (account credentials) for installing a domain controller.</p>
								<p>Use this parameter in conjunction with the <b>UserName</b> parameter.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserName:"user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name (account credentials) for the operation. If no value is specified, the credentials of the current user are used for the operation.</p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">dcpromo /CreateDCAccount operation parameters</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">The following table shows the parameters that you can use when you create an RODC account.</p>
					<p xmlns="">For more information about creating an RODC account, see Performing a Staged RODC Installation (<a href="http://go.microsoft.com/fwlink/?LinkId=133259" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133259</linktext></a>).</p>
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter:value
								</th>
								<th colspan="1">
									Description and default
								</th>
							</tr><tr>
							<td colspan="1">
								<p>AutoConfigDNS:{Yes | No}</p>
								<p>This parameter has been renamed to InstallDNS.</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the DNS Server service should be installed. The default is computed automatically based on the environment. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ConfirmGc:{Yes | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the domain controller will be a global catalog server.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DCAccountName:"name of the domain controller to create"</p>
							</td>
							<td colspan="1">
								<p>Specifies the name of the RODC account that you are creating.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DelegatedAdmin:"name of user or group"</p>
							</td>
							<td colspan="1">
								<p>Specifies the name of the user or group that will install and administer the RODC.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>InstallDNS:{Yes | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the DNS Server service should be installed. The default is computed automatically based on the environment. This parameter replaces <b>/AutoConfigDNS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Password:"password"</p>
							</td>
							<td colspan="1">
								<p>Specifies the password that corresponds to the user name (account credentials) that is used to install the domain controller. Use this parameter in conjunction with the <b>UserName</b> parameter.</p>
								<p>Specify <b>*</b> to prompt the user to supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>PasswordReplicationAllowed:{"security_principal" | None}</p>
							</td>
							<td colspan="1">
								<p>Specifies the names of user accounts, group accounts, and computer accounts whose passwords can be replicated to this RODC. Use <b>None</b> if you want to keep this value empty. By default, only the Allowed RODC Password Replication Group is allowed, and it is originally created empty.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>PasswordReplicationDenied:{"security_principal" | None}</p>
							</td>
							<td colspan="1">
								<p>Specifies the names of user accounts, group accounts, and computer accounts whose passwords are not to be replicated to this RODC. Use <b>None</b> if you do not want to deny the replication of credentials of any users or computers. By default, Administrators, Server Operators, Backup Operators, Account Operators, and the Denied RODC Password Replication Group are denied. By default, the Denied RODC Password Replication Group includes Cert Publishers, Domain Admins, Enterprise Admins, Enterprise Domain Controllers, Enterprise Read-Only Domain Controllers, Group Policy Creator Owners, the krbtgt account, and Schema Admins.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicaDomainDNSName:"DNS_name_of_domain"</p>
							</td>
							<td colspan="1">
								<p>Specifies the FQDN of the domain in which you want to install an additional domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicationSourceDC:"DNS_name_of_DC"</p>
							</td>
							<td colspan="1">
								<p>Indicates the FQDN of the partner domain controller from which you replicate the domain information.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SiteName:"site_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the name of an existing site where you can place the new domain controller.</p>
								<p>The default value depends on the type of installation. For a new forest, the default is Default-First-Site-Name. For all other installations, the default is the site that is associated with the subnet that includes the IP address of this server. If no such site exists, the default is the site of the replication source domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserDomain:"domain_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the domain name for the user name (account credentials) for the operation. This parameter also helps to specify the forest where you plan to install the domain controller or create an RODC account. If no value is specified, the domain of the computer is used.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserName:"user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name (account credentials) for the operation. If no value is specified, the credentials of the current user are used for the operation. </p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">dcpromo /UseExistingAccount operation parameters</h2><div id="sectionSection4" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">You can use parameters in the following list when you attach a server to an RODC account.</p>
					<p xmlns="">For more information about attaching a server to an RODC account, see Performing a Staged RODC Installation (<a href="http://go.microsoft.com/fwlink/?LinkId=133259" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133259</linktext></a>).</p>
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter:value
								</th>
								<th colspan="1">
									Description and default
								</th>
							</tr><tr>
							<td colspan="1">
								<p>ApplicationPartitionsToReplicate:""</p>
							</td>
							<td colspan="1">
								<p>Specifies the application directory partitions that <b>dcpromo</b> will replicate. Use the following format:</p>
								<p>
									<b>"partition1" "partition2" "partitionN"</b>
								</p>
								<p>Use <b>*</b> to replicate all application directory partitions.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>CriticalReplicationOnly:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the installation performs only critical replication before reboot and then continues, skipping the noncritical (and potentially lengthy) portion of replication. The noncritical replication happens after the role installation finishes and the computer reboots.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DatabasePath:"path_to_database_files" </p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non-UNC path to a directory on a fixed disk of the local computer that contains the domain database, for example, <b>C:\Windows\NTDS</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\NTDS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p> </p>
							</td>
							<td colspan="1">
								<p> </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p> </p>
							</td>
							<td colspan="1">
								<p> </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p> </p>
							</td>
							<td colspan="1">
								<p> </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSOnNetwork:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the DNS Server service is available on the network. This parameter is used only when the IP setting of the network adapter for this computer is not configured with the name of a DNS server for name resolution. <b>No</b> indicates that DNS server will be installed on this computer for name resolution. Otherwise, the IP settings of network adapter must be configured with a DNS server name first.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>LogPath:"path_to_log_files"</p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non-UNC path to a directory on a fixed disk of the local computer that contains the domain log files, for example, <b>C:\Windows\Logs</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\NTDS</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Password:"password"</p>
							</td>
							<td colspan="1">
								<p>Specifies the password that corresponds to the user name (account credentials) that is used to install the domain controller. Use this parameter in conjunction with the <b>UserName</b> parameter.</p>
								<p>Use <b>*</b> to prompt the user to supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnCompletion:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon completion, regardless of success.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnSuccess:{&lt;Yes&gt; | No | NoAndNoPromptEither}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon successful completion.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicaDomainDNSName:"DNS_name_of_domain"</p>
							</td>
							<td colspan="1">
								<p>Specifies the FQDN of the domain in which you want to install an additional domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicationSourceDC:"DNS_name_of_DC"</p>
							</td>
							<td colspan="1">
								<p>Indicates the FQDN of the partner domain controller from which you replicate the domain information.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>ReplicationSourcePath:"replication_source_path"</p>
							</td>
							<td colspan="1">
								<p>Indicates the location of the installation media that will be used to install a new domain controller.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SafeModeAdminPassword:"password" </p>
							</td>
							<td colspan="1">
								<p>Supplies the password for the administrator account when the computer is started in Safe Mode or a variant of Safe Mode, such as Directory Service Restore Mode.</p>
								<p>The default is an empty password. You must supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SkipAutoConfigDns</p>
							</td>
							<td colspan="1">
								<p>Skips automatic configuration of DNS client settings, forwarders, and root hints. This parameter is in effect only if the DNS Server service is already installed.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Syskey:{&lt;none&gt; | system key}</p>
							</td>
							<td colspan="1">
								<p>Specifies the system key for the media from which you replicate the data.</p>
								<p>The default is <b>none</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>SysVolPath:"path_to_database_file" </p>
							</td>
							<td colspan="1">
								<p>Specifies the fully qualified, non-UNC path to a directory on a fixed disk of the local computer, for example, <b>C:\Windows\SYSVOL</b>.</p>
								<p>The default is <b>%SYSTEMROOT%\SYSVOL</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p> </p>
							</td>
							<td colspan="1">
								<p> </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserDomain:"domain_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the domain name for the user name (account credentials) for the operation. This parameter also helps to specify the forest where you plan to install the domain controller or create an RODC account. If no value is specified, the domain of the computer will be used.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserName:"user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name (account credentials) for the operation. If no value is specified, the credentials of the current user are used for the operation. </p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">dcpromo Demotion operation parameters</h2><div id="sectionSection5" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">You can use parameters in the following list when you remove AD Ds from a domain controller that runs Windows Server 2008.</p>
					<p xmlns="">For more information about removing a domain controller from a domain, see Removing a Windows Server 2008 Domain Controller from a Domain (<a href="http://go.microsoft.com/fwlink/?LinkID=128114" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkID=128114</linktext></a>).</p>
					<p xmlns="">For more information about removing the last domain controller in a domain, see Removing the Last Windows Server 2008 Domain Controller in a Domain (<a href="http://go.microsoft.com/fwlink/?LinkId=133260" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133260</linktext></a>).</p>
					<p xmlns="">For more information about removing the last domain controller in a forest, see Removing the Last Windows Server 2008 Domain Controller in a Forest (<a href="http://go.microsoft.com/fwlink/?LinkId=133261" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=133261</linktext></a>).</p>
					<p xmlns="">For more information about forcing the removal of a domain controller, see Forcing the Removal of a Windows Server 2008 Domain Controller (<a href="http://go.microsoft.com/fwlink/?LinkID=132627" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkID=132627</linktext></a>).</p>
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter:value
								</th>
								<th colspan="1">
									Description and default
								</th>
							</tr><tr>
							<td colspan="1">
								<p>AdministratorPassword:"administrator password"</p>
							</td>
							<td colspan="1">
								<p>Specifies a local administrator account password when AD DS is removed from a domain controller. The default is an empty password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DemoteFSMO:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Indicates that (forced) demotion should continue even if an operations master role is discovered on domain controller from which AD DS is being removed.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSDelegationPassword {<i>Password</i> | *}</p>
							</td>
							<td colspan="1">
								<p>Specifies the password to use for the user name (the account credentials) when you create or remove the DNS delegation. Specify * to prompt the user to enter credentials.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>DNSDelegationUserName: "user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name to use when you create or remove the DNS delegation. If you do not specify a value, then the account credentials that you specify for the AD DS installation or removal are used to for the DNS delegation.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>IgnoreIsLastDcInDomainMismatch:{Yes | &lt;No&gt;} </p>
							</td>
							<td colspan="1">
								<p>Used in conjunction with <b>/IsLastDCInDomain</b>. This parameter specifies whether Dcpromo.exe ignores any inconsistency that it detects with the value that you specify for <b>/IsLastDCInDomain</b>. For example, if you specify <b>/IsLastDCInDomain:Yes</b> but <b>dcpromo</b> detects that there is actually another active domain controller in the domain, you can specify <b>/IgnoreIsLastDcInDomainMismatch:Yes</b> to have <b>dcpromo</b> continue the removal of AD DS from the domain controller despite the inconsistency that it has detected. Similarly, if you specify <b>/IsLastDCInDomain:No</b> but <b>dcpromo</b> cannot detect that another domain controller is in the domain, you can specify <b>/IgnoreIsLastDcInDomainMismatch:Yes</b> to have <b>dcpromo</b> continue to remove AD DS from the domain controller. </p>
								<p>The default is <b>No</b>. The default causes the wizard to prompt the user to continue, and it causes the command-line tool to exit with an error.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>IgnoreIsLastDNSServerForZone:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to continue the removal of AD DS despite the fact that the domain controller is the last DNS server for one or more of the Active Directory–integrated DNS zones that it hosts.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>IsLastDCInDomain:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether the computer from which AD DS is being removed is the last domain controller in the domain.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Password:"password"</p>
							</td>
							<td colspan="1">
								<p>Specifies the password that corresponds to the user name (account credentials) that is used to install the domain controller. Use this parameter in conjunction with the <b>UserName</b> parameter.</p>
								<p>Specify <b>*</b> to prompt the user to supply a password.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnCompletion:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon completion, regardless of success.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RebootOnSuccess:{&lt;Yes&gt; | No | NoAndNoPromptEither}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to restart the computer upon successful completion.</p>
								<p>The default is <b>Yes</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RemoveApplicationPartitions:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to remove application partitions during the removal of AD DS from a domain controller.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RemoveDNSDelegation:{&lt;Yes&gt; | No}</p>
							</td>
							<td colspan="1">
								<p>Specifies whether to remove DNS delegations that point to this DNS server from the parent DNS zone.</p>
								<p>The default is Yes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>RetainDCMetadata:{Yes | &lt;No&gt;}</p>
							</td>
							<td colspan="1">
								<p>Retains domain controller metadata in the domain after AD DS removal to allow a delegated administrator to remove AD DS from an RODC.</p>
								<p>The default is <b>No</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserDomain:"domain_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the domain name for the user name (account credentials) for the operation. This parameter also helps to specify the forest where you plan to install the domain controller or create an RODC account. If no value is specified, the domain of the computer will be used.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>UserName:"user_name"</p>
							</td>
							<td colspan="1">
								<p>Specifies the user name (account credentials) for the operation. If no value is specified, the credentials of the current user are used for the operation. </p>
							</td>
						</tr></table>
				</content></div><a name="BKMK_EXAMPLES"></a><a name="d660e761-9ee7-4382-822a-06fc2365a1d2#BKMK_EXAMPLES"></a><h2 class="heading">Examples</h2><div id="sectionSection6" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">The following example supplies an answer file named <b>NewForestInstallation</b>:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>dcpromo /answer:NewForestInstallation</pre></td></tr></table></span></div>
					<p xmlns="">The following example creates the first domain controller in a new child domain where you expect to install at least some Windows Server 2003 domain controllers:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>dcpromo /unattend /InstallDns:yes /ParentDomainDNSName:contoso.com /replicaOrNewDomain:domain /newDomain:child /newDomainDnsName:east.contoso.com /childName:east /DomainNetbiosName:east /databasePath:"e:\ntds" /logPath:"e:\ntdslogs" /sysvolpath:"g:\sysvol" /safeModeAdminPassword:FH#3573.cK /forestLevel:2 /domainLevel:2 /rebootOnCompletion:yes</pre></td></tr></table></span></div>
					<p xmlns="">The following example creates an additional domain controller with the global catalog, and it installs and configures the DNS Server service:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>dcpromo /unattend /InstallDns:yes /confirmGC:yes /replicaOrNewDomain:replica /databasePath:"e:\ntds" /logPath:"e:\ntdslogs" /sysvolpath:"g:\sysvol" /safeModeAdminPassword:M6$,U8Gvx4 /rebootOnCompletion:yes</pre></td></tr></table></span></div>
				</content></div><h2 class="heading"><span id="changeHistoryNoToggle">Change History</span></h2><div id="changeHistorySectionSection" class="section">
				<content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
							<td>
								<p>Date</p>
							</td>
							<td>
								<p>Revision</p>
							</td>
						</tr><tr>
							<td>
								<p>10/4/2010</p>
							</td>
							<td>
								<p>Removed the DNSDelegation, DNSDelegationUserName, DNSDelegationPassword, and TransferIMRoleIfNecessary parameters from the /UseExistingAccount operation.</p>
							</td>
						</tr></table>
				</content>
			</div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>