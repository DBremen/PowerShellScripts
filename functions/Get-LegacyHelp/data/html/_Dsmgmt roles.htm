<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>roles</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">roles</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2008,Windows Server 2008,Windows Server 2003 with SP1,Windows Server 2003 with SP1,Windows Server 2003,Windows Server 2003,Windows Server 2003 R2,Windows Server 2003 R2</p>
				<p>Seizes and transfers operations master roles (also known as flexible single master operations or FSMO roles). At the <b>roles:</b> prompt, type any of the parameters listed under “Syntax.”</p>
				<p>This is a subcommand of Ntdsutil and Dsmgmt. Ntdsutil and Dsmgmt are command-line tools that are built into Windows Server 2008 and Windows Server 2008 R2. Ntdsutil is available if you have the Active Directory Domain Services (AD DS) or Active Directory Lightweight Directory Services (AD LDS server role installed. Dsmgmt is available if you have the AD LDS server role installed. These tools are also available if you install the Active Directory Domain Services Tools that are part of the Remote Server Administration Tools (RSAT). For more information, see <a href="http://go.microsoft.com/fwlink/?LinkID=177813" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">How to Administer Microsoft Windows Client and Server Computers Locally and Remotely</linktext></a> (http://go.microsoft.com/fwlink/?LinkID=177813).</p>
				<p>To use either of these tools, you must run them from an elevated command prompt. To open an elevated command prompt, click <b>Start</b>, right-click <b>Command Prompt</b>, and then click <b>Run as administrator</b>.</p>
				<p>For examples of how to use this command, see <a href="#BKMK_examples">Examples</a>.</p>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>connections 
[select operation target] [{seize naming master | seize infrastructure master | seize PDC | seize RID master | seize schema master}] [{transfer naming master | transfer infrastructure master | transfer PDC | transfer RID master | transfer schema master}]</pre></td></tr></table></span></div>
				</content></div><h2 class="heading">Parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter
								</th>
								<th colspan="2">
									Description
								</th>
							</tr><tr>
							<td colspan="1">
								<p>connections</p>
							</td>
							<td colspan="2">
								<p>Invokes the <b>Server connections</b> submenu.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>seize naming master</p>
							</td>
							<td colspan="2">
								<p>Forces the domain controller to which you are connected to claim ownership of the domain naming master operations master role without regard to the data associated with the role. Use only for recovery purposes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>seize infrastructure master</p>
							</td>
							<td colspan="2">
								<p>Forces the domain controller to which you are connected to claim ownership of the infrastructure operations master role without regard to the data associated with the role. Use only for recovery purposes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>seize PDC</p>
							</td>
							<td colspan="2">
								<p>Forces the domain controller to which you are connected to claim ownership of the primary domain controller (PDC) emulator operations master role without regard to the data associated with the role. Use only for recovery purposes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>seize RID master</p>
							</td>
							<td colspan="2">
								<p>Forces the domain controller to which you are connected to claim ownership of the relative ID (RID) operations master role without regard to the data associated with the role. Use only for recovery purposes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>seize schema master</p>
							</td>
							<td colspan="2">
								<p>Forces the domain controller to which you are connected to claim ownership of the schema operations master role without regard to the data associated with the role. Use only for recovery purposes.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>select operation target</p>
							</td>
							<td colspan="2">
								<p>Invokes the <b>Select operation target</b> submenu.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>transfer naming master</p>
							</td>
							<td colspan="2">
								<p>Instructs the domain controller to which you are connected to obtain the domain naming master role by means of controlled transfer.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>transfer infrastructure master</p>
							</td>
							<td colspan="2">
								<p>Instructs the domain controller to which you are connected to obtain the infrastructure operations master role by means of controlled transfer.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>transfer PDC</p>
							</td>
							<td colspan="2">
								<p>Instructs the domain controller to which you are connected to obtain the PDC emulator operations master role by means of controlled transfer.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>transfer RID master</p>
							</td>
							<td colspan="2">
								<p>Instructs the domain controller to which you are connected to obtain the RID operations master role by means of controlled transfer.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>transfer schema master</p>
							</td>
							<td colspan="2">
								<p>Instructs the domain controller to which you are connected to obtain the schema operations master role by means of controlled transfer.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>quit</p>
							</td>
							<td colspan="2">
								<p>Takes you back to the previous menu, or exits the utility.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>?</p>
							</td>
							<td colspan="2">
								<p>Displays Help at the command prompt.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>Help</p>
							</td>
							<td colspan="1">
								<p>Displays Help at the command prompt.</p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<ul xmlns=""><li class="unordered">
							Although AD DS is based on a multimaster administration model, some operations support only a single master. For multimaster operations, conflict resolution ensures that after the system finishes replicating, all replicas agree on the value for a given property on a given object. However, some data, for which adequate conflict resolution is not possible, is key to the operation of the system as a whole. This data is controlled by individual domain controllers called operations masters. These domain controllers are referred to as holding a particular operations master role.<br><br>
							The following are the five operations master roles; some are enterprise-wide and some are per domain:<br><br>
							<ul><li class="unordered">
									
										<b>Schema master</b>. There is a single schema operations master role for the entire enterprise. This role allows the operations master server to accept schema updates. There are other restrictions on schema updates.<br><br>
								</li><li class="unordered">
									
										<b>RID master</b>. There is one RID master per domain. Each domain controller in a domain has the ability to create security principals. Each security principal is assigned a RID. Each domain controller is allocated a small set of RIDs out of a domain-wide RID pool. The RID operations master role makes it possible for the domain controller to allocate new subpools out of the domain-wide RID pool.<br><br>
								</li><li class="unordered">
									
										<b>Domain naming master</b>. There is a single domain naming operations master role for the entire enterprise. The domain naming operations master role allows the owner to define new cross-reference objects representing domains in the Partitions container.<br><br>
								</li><li class="unordered">
									
										<b>PDC emulator master</b>. There is one PDC emulator operations master role per domain. The owner of the PDC emulator operations master role identifies which domain controller in a domain performs Windows NT 4.0 PDC activities in support of Windows NT 4.0 backup domain controllers and client computers that use earlier versions of Windows.<br><br>
								</li><li class="unordered">
									
										<b>Infrastructure master</b>. There is one infrastructure master operations role per domain. The owner of this role ensures the referential integrity of objects with attributes that contain distinguished names of other objects that might exist in other domains. Because AD DS allows objects to be moved or renamed, the infrastructure master periodically checks for object modifications and maintains the referential integrity of these objects.<br><br>
								</li></ul>
						</li><li class="unordered">
							An operations master role can be moved only by administrative involvement; it is not moved automatically. In addition, moving a role is controlled by standard access controls. Therefore, an organization should tightly control the location and movement of operations master roles. For example, an organization with a strong information technology (IT) presence might place the schema master operations role on a server computer in the IT group and configure its access control list (ACL) so that it cannot be moved at all.<br><br>
							Operations master roles require two forms of management: controlled transfer and seizure.<br><br>
							Use controlled transfer when you want to move a role from one server to another, perhaps to track a policy change with respect to role location or in anticipation of a server being shut down, moved, or decommissioned.<br><br>
							Seizure is required when a server that is holding a role fails and you do not intend to restore it. Even in the case of a server that is recovered from a backup, the server does not assume that it owns a role (even if the backup tape says so), because the server cannot determine if the role was legitimately transferred to another server in the time period between when the backup was made and the server failed and was recovered. The restored server assumes role ownership only if a quorum of existing servers is available during recovery and they all agree that the restored server is still the owner.<br><br>
							The Roles submenu in Ntdsutil is used to perform controlled transfer and recovery of operations master roles. Controlled transfer is simple and safe. Because the source server and destination server are running, the system software guarantees that the operations master role token and its associated data are transferred atomically. Operations master role seizure is equally simple but not as safe: you simply tell a particular domain controller that it is now the owner of a particular role.<br><br>
							<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/Caution.gif">Caution </th></tr><tr><td>
								Do not make a server an operations master role owner by means of seizure commands if the real role holder exists on the network. Doing this can create irreconcilable conflicts for key system data. If an operations master role owner is temporarily unavailable, do not make another domain controller the role owner. This can result in a situation in which two computers function as the role owner, which might cause irreconcilable conflicts for key system data.<p>
							</td></tr></table><p></div>
						</li><li class="unordered">
							
								Ntdsutil does not correctly handle special characters, such as the apostrophe character ('), that you can enter at the <b>ntdsutil:</b> prompt at the command line. In some situations, there may be an alternative workaround. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkId=157320" alt="" target="_blank"><maml:linktext xmlns:maml="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">local roles</maml:linktext></a> (http://go.microsoft.com/fwlink/?LinkId=157320).
							<br><br>
						</li></ul>
				</content></div><a name="BKMK_examples"></a><a name="f74c0470-3b2d-422c-bbbc-385cf39ec175#BKMK_examples"></a><h2 class="heading">Examples</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">To transfer the PDC emulator master role to the domain controller that you are currently connected to, type the following command, and then press ENTER:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>fsmo maintenance: transfer PDC</pre></td></tr></table></span></div>
				</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
						</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
							<h4 class="subHeading" xmlns="">Additional references</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
									<p xmlns="">
										<a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a>
									</p>
<p xmlns=""><a href="c525f20d-fdcf-4da8-8450-cce9988bc811.htm">Dsmgmt</a></p><p xmlns=""><a href="199cebb9-967c-4307-a9d7-1c0bb50dc75b.htm">Ntdsutil</a></p><p xmlns=""><a href="b5416510-9aa5-44e4-8b4b-279dee264183.htm">authoritative restore</a></p><p xmlns=""><a href="f27dc4c0-0623-401b-b411-48acf995f595.htm">configurable settings</a></p><p xmlns=""><a href="baa9c5e1-0c26-4d57-8ca9-ff5b15c33d29.htm">DS behavior</a></p><p xmlns=""><a href="594c47bc-095d-465e-b7cb-3f0234350460.htm">files</a></p><p xmlns=""><a href="dc3722d8-b6de-4863-b456-1b17139caa42.htm">group membership evaluation</a></p><p xmlns=""><a href="c705e804-97d5-4a15-8d60-1ba09e5544e6.htm">ifm</a></p><p xmlns=""><a href="309950c8-5bfa-4b9e-b4a2-706ac63948ec.htm">LDAP policies</a></p><p xmlns=""><a href="aee69f2f-49bf-49cb-ac0b-eccc26423b1f.htm">local roles</a></p><p xmlns=""><a href="8ff66708-2ad0-4f52-982d-376a50a0e2dd.htm">metadata cleanup</a></p><p xmlns=""><a href="8ee336a2-b784-4743-8500-8d224a372110.htm">partition management</a></p><p xmlns=""><a href="1a4153d9-eb6e-4c50-8063-eb4ce961c32c.htm">security account management</a></p><p xmlns=""><a href="16b6f806-20b9-47bd-92c5-5cd96645c3bf.htm">semantic database analysis</a></p><p xmlns=""><a href="66fbd855-b3ee-434f-b890-c96858da8178.htm">set DSRM password</a></p><p xmlns=""><a href="a4b0e355-cbd0-4f48-9484-877fad1789ec.htm">snapshot</a></p></content></div>
						</sections></div>
				</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>