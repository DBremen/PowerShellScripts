<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Wbadmin start recovery</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Wbadmin start recovery</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2008,Windows Server 2008 R2</p>
				<p>Runs a recovery operation based on the parameters that you specify.</p>
				<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/note.gif">Note </th></tr><tr><td>
					This subcommand applies only to Windows Server 2008 and Windows Server 2008 R2.<p>
				</td></tr></table><p></div>
				<p>To perform a recovery with this subcommand, you must be a member of the <b>Backup Operators</b> group or the <b>Administrators</b> group, or you must have been delegated the appropriate permissions. In addition, you must run <b>wbadmin</b> from an elevated command prompt. (To open an elevated command prompt, click <b>Start</b>, right-click <b>Command Prompt</b>, and then click <b>Run as administrator</b>.)</p>
				<p>For examples of how to use this subcommand, see <a href="#BKMK_Examples">Examples</a>.</p>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery
-version:&lt;VersionIdentifier&gt;
-items:{&lt;VolumesToRecover&gt; | &lt;AppsToRecover&gt; | &lt;FilesOrFoldersToRecover&gt;}
-itemtype:{Volume | App | File}
[-backupTarget:{&lt;VolumeHostingBackup&gt; | &lt;NetworkShareHostingBackup&gt;}]
[-machine:&lt;BackupMachineName&gt;]
[-recoveryTarget:{&lt;TargetVolumeForRecovery&gt; | &lt;TargetPathForRecovery&gt;}]
[-recursive]
[-overwrite:{Overwrite | CreateCopy | Skip}]
[-notRestoreAcl]
[-skipBadClusterCheck]
[-noRollForward]
[-quiet]</pre></td></tr></table></span></div>
				</content></div><h2 class="heading">Parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter
								</th>
								<th colspan="1">
									Description
								</th>
							</tr><tr>
							<td colspan="1">
								<p>-version</p>
							</td>
							<td colspan="1">
								<p>Specifies the version identifier of the backup to recover in MM/DD/YYYY-HH:MM format. If you do not know the version identifier, type <b>wbadmin get versions</b>. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-items</p>
							</td>
							<td colspan="1">
								<p>Specifies a comma-delimited list of volumes, applications, files, or folders to recover. </p>
								<ul><li class="unordered">
										If <b>-itemtype</b> is <b>Volume</b>, you can specify only a single volume—by providing the volume drive letter, volume mount point, or GUID-based volume name. <br><br>
									</li><li class="unordered">
										If <b>-itemtype</b> is <b>App</b>, you can specify only a single application. To be recovered, the application must have registered with Windows Server Backup. You can also use the value <b>ADIFM</b> to recover an installation of Active Directory. See Remarks in for more information. <br><br>
									</li><li class="unordered">
										If <b>-itemtype</b> is <b>File</b>, you can specify files or folders, but they should be part of the same volume and they should be under the same parent folder.<br><br>
									</li></ul>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-itemtype</p>
							</td>
							<td colspan="1">
								<p>Specifies type of items to recover. Must be <b>Volume</b>, <b>App</b>, or <b>File</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-backupTarget</p>
							</td>
							<td colspan="1">
								<p>Specifies the storage location that contains the backup that you want to recover. This parameter is useful when the location is different from where backups of this computer are usually stored.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-machine</p>
							</td>
							<td colspan="1">
								<p>Specifies the name of the computer that you want to recover the backup for. This parameter is useful when multiple computers have been backed up to the same location. It should be used when the <b>-backupTarget</b> parameter is specified.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-recoveryTarget</p>
							</td>
							<td colspan="1">
								<p>Specifies the location to restore to. This parameter is useful if this location is different than the location that was previously backed up. It can also be used for restorations of volumes, files, or applications. If you are restoring a volume, you can specify the volume drive letter of the alternate volume. If you are restoring a file or application, you can specify an alternate recovery location. </p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-recursive</p>
							</td>
							<td colspan="1">
								<p>Valid only when recovering files. Recovers the files in the folders and all files subordinate to the specified folders. By default, only files which reside directly in the specified folders are recovered.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-overwrite</p>
							</td>
							<td colspan="1">
								<p>Valid only when recovering files. Specifies the action to take when a file that is being recovered already exists in the same location. </p>
								<ul><li class="unordered">
										
											<b>Skip</b> causes Windows Server Backup to skip the existing file and continue with recovery of the next file. <br><br>
									</li><li class="unordered">
										
											<b>CreateCopy</b> causes Windows Server Backup to create a copy of the existing file so that the existing file is not modified. <br><br>
									</li><li class="unordered">
										
											<b>Overwrite</b> causes Windows Server Backup to overwrite the existing file with the file from the backup.<br><br>
									</li></ul>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-notRestoreAcl</p>
							</td>
							<td colspan="1">
								<p>Valid only when recovering files. Specifies to not restore the security access control lists (ACLs) of the files being recovered from the backup. By default, the security ACLs are restored (the default value is <b>true)</b>. If this parameter is used, the ACLs for the restored files will be inherited from the location to which the files are being restored.</p>
								<p>
								</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-skipBadClusterCheck</p>
							</td>
							<td colspan="1">
								<p>Valid only when recovering volumes. Skips checking the disks that you are recovering to for bad cluster information. If you are recovering to an alternate server or hardware, we recommend that you do not use this parameter. You can manually run the command <b>chkdsk /b</b> on these disks at any time to check them for bad clusters, and then update the file system information accordingly. </p>
								<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/Important.gif">Important </th></tr><tr><td>
									Until you run <b>chkdsk</b> as described, the bad clusters reported on your recovered system may not be accurate.<p>
								</td></tr></table><p></div>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-noRollForward</p>
							</td>
							<td colspan="1">
								<p>Valid only when recovering applications. Allows for previous point-in-time recovery of an application if the latest version from the backups is selected. For other versions of the application that are not the latest, previous point-in-time recovery is done as the default.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>-quiet</p>
							</td>
							<td colspan="1">
								<p>Runs the subcommand with no prompts to the user.</p>
							</td>
						</tr></table>
				</content></div><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<ul xmlns=""><li class="unordered">
							To view a list of items that are available for recovery from a specific backup version, use <b>wbadmin get items</b>. If a volume did not have a mount point or drive letter at the time of backup, then this subcommand would return a GUID-based volume name that should be used for recovering the volume. <br><br>
						</li><li class="unordered">
							When the <b>-itemtype</b> is <b>App</b>, you can use a value of <b>ADIFM</b> for <b>-item </b>to perform an install from media operation to recover all the related data needed for Active Directory Domain Services. <b>ADIFM</b> creates a copy of the Active Directory database, registry, and SYSVOL state, and then saves this information in the location specified by <b>-recoveryTarget</b>. Use this parameter only when <b>-recoveryTarget</b> is specified.<br><br>
							<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/note.gif">Note </th></tr><tr><td>
								Before using <b>wbadmin</b> to perform an install from media operation, you should consider using the <b>ntdsutil</b> command because <b>ntdsutil</b> only copies the minimum amount of data needed, and it uses a more secure data transport method.<p>
							</td></tr></table><p></div>
						</li></ul>
				</content></div><a name="BKMK_Examples"></a><a name="52381316-a0fa-459f-b6a6-01e31fb21612#BKMK_Examples"></a><h2 class="heading">Examples</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">To run a recovery of the backup from March 31, 2005, taken at 9:00 A.M., of volume d:, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery -version:03/31/2005-09:00 -itemType:Volume -items:d:</pre></td></tr></table></span></div>
					<p xmlns="">To run a recovery to drive d of the backup from March 31, 2005, taken at 9:00 A.M., of the registry, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery -version:03/31/2005-09:00 -itemType:App -items:Registry -recoverytarget:d:\</pre></td></tr></table></span></div>
					<p xmlns="">To run a recovery of the backup from March 31, 2005, taken at 9:00 A.M., of the d:\folder and folders subordinate to d:\folder, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery -version:03/31/2005-09:00 -itemType:File -items:d:\folder -recursive</pre></td></tr></table></span></div>
					<p xmlns="">To run a recovery of the backup from March 31, 2005, taken at 9:00 A.M., of the volume \\?\Volume{cc566d14-44a0-11d9-9d93-806e6f6e6963}\, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery -version:03/31/2005-09:00 -itemType:Volume 
-items:\\?\Volume{cc566d14-44a0-11d9-9d93-806e6f6e6963}\</pre></td></tr></table></span></div>
					<p xmlns="">To run a recovery of the backup from April 30, 2005, taken at 9:00 A.M., of the shared folder \\servername\share from server01, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>wbadmin start recovery -version:04/30/2005-09:00 -backupTarget:\\servername\share -machine:server01</pre></td></tr></table></span></div>
				</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
						</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
							<h4 class="subHeading" xmlns="">Additional references</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
									<ul xmlns=""><li class="unordered">
											
												<a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a>
											<br><br>
										</li><li class="unordered">
											
												<a href="4b0b3f32-d21f-4861-84bb-b2eadbf1e7b8.htm">Wbadmin</a>
											<br><br>
										</li><li class="unordered">
											For more information about Active Directory Domain Services Installation and Removal, see the step-by-step guide (<a href="http://go.microsoft.com/fwlink/?LinkId=86727" alt="" target="_blank"><linktext xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">http://go.microsoft.com/fwlink/?LinkId=86727</linktext></a>).<br><br>
										</li></ul>
								</content></div>
						</sections></div>
				</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>