<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Chkdsk</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Chkdsk</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Vista,Windows Server 2008</p>
<p>Checks the file system and file system metadata of a volume for logical and physical errors. If used without parameters, <b>chkdsk</b> displays only the status of the volume and does not fix any errors. If used with the <b>/f</b>, <b>/r</b>, <b>/x</b>, or <b>/b</b> parameters, it fixes errors on the volume.</p>

<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/Important.gif">Important </th></tr><tr><td>
Membership in the local <b>Administrators</b> group, or equivalent, is the minimum required to run <b>chkdsk</b>.<p>
</td></tr></table><p></div>

<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/Important.gif">Important </th></tr><tr><td>
Interrupting <b>chkdsk</b> is not recommended. However, canceling or interrupting <b>chkdsk</b> should not leave the volume any more corrupt than it was before <b>chkdsk</b> was run. Rerunning <b>chkdsk</b> checks and repairs any remaining corruption on the volume.<p>
</td></tr></table><p></div>

<p>For examples of how to use this command, see <a href="#BKMK_examples">Examples</a>.</p>
<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>chkdsk [&lt;Volume&gt;[[&lt;Path&gt;]&lt;FileName&gt;]] [/f] [/v] [/r] [/x] [/i] [/c] [/l[:&lt;Size&gt;]] [/b]</pre></td></tr></table></span></div>
</content></div><h2 class="heading">Parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Parameter
</th>
<th colspan="1">
Description
</th></tr><tr>
<td colspan="1">
<p> &lt;Volume&gt; </p>
</td>
<td colspan="1">
<p>Specifies the drive letter (followed by a colon), mount point, or volume name.</p>
</td></tr><tr>
<td colspan="1">
<p>[&lt;Path&gt;]&lt;FileName&gt;</p>
</td>
<td colspan="1">
<p>Use with file allocation table (FAT) and FAT32 only. Specifies the location and name of a file or set of files that you want <b>chkdsk</b> to check for fragmentation. You can use the <b>?</b> and <b>*</b> wildcard characters to specify multiple files.</p>
</td></tr><tr>
<td colspan="1">
<p> /f </p>
</td>
<td colspan="1">
<p>Fixes errors on the disk. The disk must be locked. If <b>chkdsk</b> cannot lock the drive, a message appears that asks you if you want to check the drive the next time you restart the computer.</p>
</td></tr><tr>
<td colspan="1">
<p> /v </p>
</td>
<td colspan="1">
<p>Displays the name of each file in every directory as the disk is checked.</p>
</td></tr><tr>
<td colspan="1">
<p> /r </p>
</td>
<td colspan="1">
<p>Locates bad sectors and recovers readable information. The disk must be locked. <b>/r</b> includes the functionality of <b>/f</b>, with the additional analysis of physical disk errors.</p>
</td></tr><tr>
<td colspan="1">
<p> /x </p>
</td>
<td colspan="1">
<p>Forces the volume to dismount first, if necessary. All open handles to the drive are invalidated. <b>/x</b> also includes the functionality of <b>/f</b>.</p>
</td></tr><tr>
<td colspan="1">
<p> /i </p>
</td>
<td colspan="1">
<p>Use with NTFS only. Performs a less vigorous check of index entries, which reduces the amount of time required to run <b>chkdsk</b>.</p>
</td></tr><tr>
<td colspan="1">
<p> /c </p>
</td>
<td colspan="1">
<p>Use with NTFS only. Does not check cycles within the folder structure, which reduces the amount of time required to run <b>chkdsk</b>.</p>
</td></tr><tr>
<td colspan="1">
<p> /l[:&lt;Size&gt;] </p>
</td>
<td colspan="1">
<p>Use with NTFS only. Changes the log file size to the size you type. If you omit the size parameter, <b>/l</b> displays the current size.</p>
</td></tr><tr>
<td colspan="1">
<p>/b</p>
</td>
<td colspan="1">
<p>NTFS only: Clears the list of bad clusters on the volume and rescans all allocated and free clusters for errors. <b>/b</b> includes the functionality of <b>/r</b>. Use this parameter after imaging a volume to a new hard disk drive.</p>
</td></tr><tr>
<td colspan="1">
<p> /? </p>
</td>
<td colspan="1">
<p>Displays help at the command prompt.</p>
</td></tr></table>
</content></div><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<ul xmlns=""><li class="unordered">
Skipping volume checks<br><br>

The <b>/i</b> or <b>/c</b> switch reduces the amount of time required to run <b>chkdsk</b> by skipping certain volume checks.<br><br>
</li><li class="unordered">
Checking a locked drive at restart <br><br>

If you want <b>chkdsk</b> to correct disk errors, you cannot have open files on the drive. If files are open, the following error message appears:<br><br>

<div class="code"><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>Chkdsk cannot run because the volume is in use by another process. Would you like to schedule this volume to be checked the next time the system restarts? (Y/N)</pre></td></tr></table></span></div>

If you choose to check the drive the next time you restart the computer, <b>chkdsk</b> checks the drive and corrects errors automatically when you restart the computer. If the drive partition is a boot partition, <b>chkdsk</b> automatically restarts the computer after it checks the drive.<br><br>

You can also use the <b>chkntfs /c</b> command to schedule the volume to be checked the next time the computer is restarted. Use the <b>fsutil dirty set</b> command to set the volume's dirty bit (indicating corruption), so that Windows runs <b>chkdsk</b> when the computer is restarted.<br><br>
</li><li class="unordered">
Reporting disk errors<br><br>

You should use <b>chkdsk</b> occasionally on FAT and NTFS file systems to check for disk errors. <b>Chkdsk</b> examines disk space and disk use and provides a status report specific to each file system. The status report shows errors found in the file system. If you run <b>chkdsk</b> without the <b>/f</b> parameter on an active partition, it might report spurious errors because it cannot lock the drive. <br><br>
</li><li class="unordered">
Fixing logical disk errors<br><br>

<b>Chkdsk</b> corrects logical disk errors only if you specify the <b>/f</b> parameter. <b>Chkdsk</b> must be able to lock the drive to correct errors.<br><br>

Because repairs on FAT file systems usually change a disk's file allocation table and sometimes cause a loss of data, <b>chkdsk</b> might display a confirmation message similar to the following:<br><br>

<div class="code"><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>10 lost allocation units found in 3 chains.
Convert lost chains to files?</pre></td></tr></table></span></div>

If you press <b>Y</b>, Windows saves each lost chain in the root directory as a file with a name in the format File&lt;nnnn&gt;.chk. When <b>chkdsk</b> finishes, you can check these files to see if they contain any data you need. If you press <b>N</b>, Windows fixes the disk, but it does not save the contents of the lost allocation units.<br><br>

If you do not use the <b>/f</b> parameter, <b>chkdsk</b> displays a message that the file needs to be fixed, but it does not fix any errors.<br><br>

If you use <b>chkdsk /f</b> on a very large disk or a disk with a very large number of files (for example, millions of files), <b>chkdsk /f</b> might take a long time to complete.<br><br>
</li><li class="unordered">
Finding physical disk errors <br><br>

Use the <b>/r</b> parameter to find physical disk errors in the file system and attempt to recover data from any affected disk sectors. <br><br>
</li><li class="unordered">
Using <b>chkdsk</b> with open files <br><br>

If you specify the <b>/f</b> parameter, <b>chkdsk</b> displays an error message if there are open files on the disk. If you do not specify the <b>/f</b> parameter and open files exist, <b>chkdsk</b> might report lost allocation units on the disk. This could happen if open files have not yet been recorded in the file allocation table. If <b>chkdsk</b> reports the loss of a large number of allocation units, consider repairing the disk.<br><br>
</li><li class="unordered">
Using <b>chkdsk</b> with Shadow Copies for Shared Folders <br><br>

Because the Shadow Copies for Shared Folders source volume cannot be locked while Shadow Copies for Shared Folders is enabled, running <b>chkdsk</b> against the source volume might report false errors or cause <b>chkdsk</b> to unexpectedly quit. You can, however, check shadow copies for errors by running <b>chkdsk</b> in Read-only mode (without parameters) to check the Shadow Copies for Shared Folders storage volume.<br><br>
</li><li class="unordered">
Understanding exit codes <br><br>

The following table lists the exit codes that <b>chkdsk</b> reports after it has finished.<br><br>

<h3 class="subHeading"></h3><table><tr>
<th colspan="1">
Exit code
</th>
<th colspan="1">
Description
</th></tr><tr>
<td colspan="1">
<p>0</p>
</td>
<td colspan="1">
<p>No errors were found.</p>
</td></tr><tr>
<td colspan="1">
<p>1</p>
</td>
<td colspan="1">
<p>Errors were found and fixed.</p>
</td></tr><tr>
<td colspan="1">
<p>2</p>
</td>
<td colspan="1">
<p>Performed disk cleanup (such as garbage collection) or did not perform cleanup because <b>/f</b> was not specified.</p>
</td></tr><tr>
<td colspan="1">
<p>3</p>
</td>
<td colspan="1">
<p>Could not check the disk, errors could not be fixed, or errors were not fixed because <b>/f</b> was not specified.</p>
</td></tr></table>
</li><li class="unordered">
The <b>chkdsk</b> command, with different parameters, is available from the Recovery Console.<br><br>
</li><li class="unordered">
On servers that are infrequently restarted, you may want to use the <b>chkntfs</b> or the <b>fsutil dirty query</b> commands to determine whether the volume's dirty bit is already set before running chkdsk.<br><br>
</li></ul>
</content></div><a name="BKMK_examples"></a><a name="62912a3c-d2cc-4ef6-9679-43709a286035#BKMK_examples"></a><h2 class="heading">Examples</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<p xmlns="">If you want to check the disk in drive D and have Windows fix errors, type:</p>

<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>chkdsk d: /f</pre></td></tr></table></span></div>

<p xmlns="">If it encounters errors, <b>chkdsk</b> pauses and displays messages. <b>Chkdsk</b> finishes by displaying a report that lists the status of the disk. You cannot open any files on the specified drive until <b>chkdsk</b> finishes.</p>

<p xmlns="">To check all files on a FAT disk in the current directory for noncontiguous blocks, type:</p>

<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>chkdsk *.*</pre></td></tr></table></span></div>

<p xmlns=""><b>Chkdsk</b> displays a status report, and then lists the files that match the file specifications that have noncontiguous blocks.</p>
</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<h4 class="subHeading" xmlns="">Additional references</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<p xmlns=""><a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a></p>
</content></div>
</sections></div>
</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>