<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>mapadmin</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">mapadmin</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Vista,Windows Server 2008</p>
<p>You can use <b>Mapadmin</b> to manage User Name Mapping for Microsoft Services for Network File System.</p>
<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]]
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] {start | stop}
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] config &lt;option[...]&gt;
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] add -wu &lt;WindowsUser&gt; -uu &lt;UNIXUser&gt; [-setprimary]
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] add -wg &lt;WindowsGroup&gt; -ug &lt;UNIXGroup&gt; [-setprimary]
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] setprimary -wu &lt;WindowsUser&gt; [-uu &lt;UNIXUser&gt;]
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] setprimary -wg &lt;WindowsGroup&gt; [-ug &lt;UNIXGroup&gt;]
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] delete &lt;option[...]&gt;
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] list &lt;option[...]&gt;
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] backup &lt;filename&gt; 
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] restore &lt;filename&gt;
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] adddomainmap -d &lt;WindowsDomain&gt; {-y &lt;&lt;NISdomain&gt;&gt; | -f &lt;path&gt;}
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] removedomainmap -d &lt;WindowsDomain&gt; -y &lt;&lt;NISdomain&gt;&gt;
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] removedomainmap -all
mapadmin [&lt;computer&gt;] [-u &lt;user&gt; [-p &lt;password&gt;]] listdomainmaps</pre></td></tr></table></span></div>
</content></div><h2 class="heading">Description</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">The <b>mapadmin</b> command-line utility administers User Name Mapping on the local or  remote computer running Microsoft Services for Network File System. If you are logged on with an account that does not have administrative credentials, you can specify a user name and password of an account that does. </p>

<p xmlns="">In addition to specific command arguments, <b>mapadmin</b> accepts the following arguments and options:</p>

<dl xmlns=""><dt>&lt;computer&gt;</dt><br><dd>
Specifies the remote computer running the User Name Mapping service that you want to administer. You can specify the computer using a Windows Internet Name Service (WINS) name or a Domain Name System (DNS) name, or by Internet Protocol (IP) address.<p>
</dd></dl><dl xmlns=""><dt>-u &lt;user&gt;</dt><br><dd>
Specifies the user name of the user whose credentials are to be used. It might be necessary to add the domain name to the user name in the form <i>domain</i><b>\</b><i>user name</i>.<p>
</dd></dl><dl xmlns=""><dt>-p &lt;password&gt;</dt><br><dd>
Specifies the password of the user. If you specify the <b>-u</b> option but omit the <b>-p</b> option, you are prompted for the user's password.<p>
</dd></dl>

<p xmlns="">The specific action that <b>mapadmin</b> performs depends on the command argument you specify:</p></content></div><h2 class="heading">Parameters</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><h3 class="subHeading" xmlns="">start</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">Starts the User Name Mapping service.</p></content></div>




<h3 class="subHeading" xmlns="">stop</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">Stops the User Name Mapping service.</p></content></div>






<h3 class="subHeading" xmlns="">config</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">Specifies general settings for User Name Mapping. The following options are available with this command argument:</p>


<p xmlns=""><b>-r &lt;dddd&gt;:&lt;hh&gt;:&lt;mm&gt;</b> - Specifies the refresh interval for updating from the Windows and NIS databases in days, hours, and minutes. The minimum interval is 5 minutes. </p>


<p xmlns=""><b>-i {yes | no}</b> - Turns simple mapping on (<b>yes</b>) or off (<b>no</b>). By default, simple mapping is on.</p>







<p xmlns=""><b>add</b> - Creates a new mapping for a user or group. The following options are available with this command argument:</p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-wu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Specifies the name of the Windows user for which a new mapping is being created.</p>
</td></tr><tr>
<td colspan="1">
<p>-uu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Specifies the name of the UNIX user for which a new mapping is being created.</p>
</td></tr><tr>
<td colspan="1">
<p>-wg &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Specifies the name of the Windows group for which a new mapping is being created.</p>
</td></tr><tr>
<td colspan="1">
<p>-ug &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Specifies the name of the UNIX group for which a new mapping is being created.</p>
</td></tr><tr>
<td colspan="1">
<p>-setprimary</p>
</td>
<td colspan="1">
<p>Specifies that the new mapping is the primary mapping.</p>
</td></tr></table>




<p xmlns="">


<p xmlns=""><b>setprimary</b> - Specifies which mapping is the primary mapping for a UNIX user or group with multiple mappings. The following options are available with this command argument:</p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-wu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Specifies the Windows user of the primary mapping. If more than one mapping for the user exists, use the <b>-uu</b> option to specify the primary mapping.</p>
</td></tr><tr>
<td colspan="1">
<p>-uu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Specifies the UNIX user of the primary mapping.</p>
</td></tr><tr>
<td colspan="1">
<p>-wg &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Specifies the Windows group of the primary mapping. If more than one mapping for the group exists, use the <b>-ug</b> option to specify the primary mapping.</p>
</td></tr><tr>
<td colspan="1">
<p>-ug &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Specifies the UNIX group of the primary mapping.</p>
</td></tr></table>


<p xmlns="">




<p xmlns=""><b>delete</b> - Removes the mapping for a user or group. The following options are available for this command argument:</p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-wu &lt;user&gt;</p>
</td>
<td colspan="1">
<p>The Windows user for which the mapping will be deleted, specified as &lt;<i>WindowsDomain&gt;\&lt;User Name&gt;</i>. You must specify either the <b>-wu</b> or the <b>-uu</b> option, or both. If you specify both options, the particular mapping identified by the two options will be deleted. If you specify only the <b>-wu</b> option, all mappings for the specified user will be deleted.</p>
</td></tr><tr>
<td colspan="1">
<p>-wg &lt;group&gt;</p>
</td>
<td colspan="1">
<p>The Windows group for which the mapping will be deleted, specified as &lt;WindowsDomain&gt;\&lt;groupname&gt;. You must specify either the <b>-wg</b> or the <b>-ug</b> option, or both. If you specify both options, the particular mapping identified by the two options will be deleted. If you specify only the <b>-wg</b> option, all mappings for the specified group will be deleted.</p>
</td></tr><tr>
<td colspan="1">
<p>-uu &lt;user&gt;</p>
</td>
<td colspan="1">
<p>The UNIX user for whom the mapping will be deleted, specified as &lt;User Name&gt;. You must specify either the <b>-wu</b> or the <b>-uu</b> option, or both. If you specify both options, the particular mapping identified by the two options will be deleted. If you specify only the <b>-uu</b> option, all mappings for the specified user will be deleted.</p>
</td></tr><tr>
<td colspan="1">
<p>-ug &lt;group&gt;</p>
</td>
<td colspan="1">
<p>The UNIX group for which the mapping will be deleted, specified as &lt;groupname&gt;. You must specify either the <b>-wg</b> or the <b>-ug</b> option, or both. If you specify both options, the particular mapping identified by the two options will be deleted. If you specify only the <b>-ug</b> option, all mappings for the specified group will be deleted.</p>
</td></tr></table>



<p xmlns="">



<p xmlns=""><b>list</b> - Displays information about user and group mappings. The following options are available with this command argument: </p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-all</p>
</td>
<td colspan="1">
<p>Lists both simple and advanced mappings for users and groups.</p>
</td></tr><tr>
<td colspan="1">
<p>-simple</p>
</td>
<td colspan="1">
<p>Lists all simple mapped users and groups.</p>
</td></tr><tr>
<td colspan="1">
<p>-advanced</p>
</td>
<td colspan="1">
<p>Lists all advanced mapped users and groups. Maps are listed in the order in which they are evaluated. Primary maps, marked with an asterisk (*), are listed first, followed by secondary maps, which are marked with a carat (^).</p>
</td></tr><tr>
<td colspan="1">
<p>-wu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Lists the mapping for a specified Windows user.</p>
</td></tr><tr>
<td colspan="1">
<p>-wg &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Lists the mapping for a Windows group.</p>
</td></tr><tr>
<td colspan="1">
<p>-uu &lt;name&gt;</p>
</td>
<td colspan="1">
<p>Lists the mapping for a UNIX user.</p>
</td></tr><tr>
<td colspan="1">
<p>-ug &lt;group&gt;</p>
</td>
<td colspan="1">
<p>Lists the mapping for a UNIX group.</p>
</td></tr></table>


<p xmlns="">




<p xmlns=""><b>backup</b> - Saves User Name Mapping configuration and mapping data to the file specified by &lt;filename&gt;.</p>



<p xmlns="">



<p xmlns=""><b>restore</b> - Replaces configuration and mapping data with data from the file (specified by &lt;filename&gt;) that was created using the <b>backup</b> command argument.</p>



<p xmlns="">



<p xmlns=""><b>adddomainmap</b> - Adds a simple map between a Windows domain and an NIS domain or password and group files. The following options are available for this command argument:</p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-d &lt;WindowsDomain&gt;</p>
</td>
<td colspan="1">
<p>Specifies the Windows domain to be mapped.</p>
</td></tr><tr>
<td colspan="1">
<p>-y &lt;NISdomain&gt;</p>
</td>
<td colspan="1">
<p>Specifies the NIS domain to be mapped.</p>

<p><b>-n </b>&lt;nisServer&gt; Specifies the NIS server for the NIS domain specified with the <b>-y</b> option.</p>
</td></tr><tr>
<td colspan="1">
<p>-f &lt;path&gt;</p>
</td>
<td colspan="1">
<p>Specifies the fully qualified path of directory containing the password and group files to be mapped. The files must be located on the computer being managed, and you cannot use <b>mapadmin</b> to manage a remote computer to set up maps based on password and group files.</p>
</td></tr></table>



<p xmlns="">



<p xmlns=""><b>removedomainmap</b> - Removes a simple map between a Windows domain and an NIS domain. The following options and argument are available for this command argument:</p>

<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Option
</th>
<th colspan="1">
Definition
</th></tr><tr>
<td colspan="1">
<p>-d &lt;WindowsDomain&gt;</p>
</td>
<td colspan="1">
<p>Specifies the Windows domain of the map to be removed.</p>
</td></tr><tr>
<td colspan="1">
<p>-y &lt;NISdomain&gt;</p>
</td>
<td colspan="1">
<p>Specifies the NIS domain of the map to be removed.</p>
</td></tr><tr>
<td colspan="1">
<p>-all</p>
</td>
<td colspan="1">
<p>Specifies that all simple maps between Windows and NIS domains are to be removed. This will also remove any simple map between a Windows domain and password and group files.</p>
</td></tr></table>



<p xmlns="">



<p xmlns=""><b>listdomainmaps</b> - Lists the Windows domains that are mapped to NIS domains or password and group files.</p>

</content></div></sections></div><h2 class="heading">Notes</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<ul xmlns=""><li class="unordered">
If you do not specify a command argument, <b>mapadmin</b> displays the current settings for User Name Mapping.<br><br>
</li><li class="unordered">
For all options that specify a user or group name, the following formats can be used:<br><br>
</li><li class="unordered">
For Windows users, use the form &lt;domain&gt;\&lt;user name&gt;, \\&lt;computer&gt;\&lt;user name&gt;, \&lt;computer&gt;\&lt;user name&gt;, or &lt;computer&gt;\&lt;user name&gt;<br><br>
</li><li class="unordered">
For Windows groups, use the form &lt;domain&gt;\&lt;&lt;groupname&gt;&gt;, \\&lt;computer&gt;\&lt;&lt;groupname&gt;&gt;, \&lt;computer&gt;\&lt;&lt;groupname&gt;&gt;, or &lt;computer&gt;\&lt;&lt;groupname&gt;&gt;<br><br>
</li><li class="unordered">
For UNIX users, use the form &lt;NISdomain&gt;\&lt;user name&gt;, &lt;user name&gt;@&lt;NISdomain&gt;, user &lt;name&gt;@PCNFS, or PCNFS\&lt;user name&gt;<br><br>
</li><li class="unordered">
For UNIX groups, use the form &lt;NISdomain&gt;\&lt;groupname&gt;, &lt;groupname&gt;@&lt;NISdomain&gt;, &lt;groupname&gt;@PCNFS, or PCNFS\&lt;groupname&gt;<br><br>
</li></ul>
</content></div><h2 class="heading">Additional references</h2><div id="sectionSection4" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<p xmlns=""><a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a></p>
</content></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>