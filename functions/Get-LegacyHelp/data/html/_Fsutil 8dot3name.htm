<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Fsutil 8dot3name</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Fsutil 8dot3name</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2008 R2,Windows 7</p>
				<p>Queries or changes the settings for short name (8dot3 name) behavior, which include:</p>
				<ul><li class="unordered">
						Query the current setting for the short name behavior<br><br>
					</li><li class="unordered">
						Scan the specified directory path for registry keys that might be impacted if short names were stripped from the specified directory path<br><br>
					</li><li class="unordered">
						Change the setting that controls the short name behavior. This setting can be applied to a specified volume or to the default volume setting.<br><br>
					</li><li class="unordered">
						Remove the short names for all files within a directory<br><br>
					</li></ul>
				<p>For examples of how to use this command, see <a href="#BKMK_examples">Examples</a>.</p>
			<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>fsutil 8dot3name [query] [&lt;VolumePath&gt;]
fsutil 8dot3name [scan] [/s] [/l [&lt;log file&gt;] ] [/v] &lt;DirectoryPath&gt;
fsutil 8dot3name [set] { &lt;DefaultValue&gt; | &lt;VolumePath&gt; {1|0}}
fsutil 8dot3name [strip] [/t] [/s] [/f] [/l [&lt;log file.] ] [/v] &lt;DirectoryPath&gt;</pre></td></tr></table></span></div>
				</content></div><h2 class="heading">Parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
								<th colspan="1">
									Parameter
								</th>
								<th colspan="1">
									Description
								</th>
							</tr><tr>
							<td colspan="1">
								<p>query [&lt;VolumePath&gt;]</p>
							</td>
							<td colspan="1">
								<p>Queries the file system for the state of the 8dot3 short name creation behavior.</p>
								<p>If a <i>VolumePath</i> is not specified as a parameter, the default 8dot3name creation behavior setting for all volumes is displayed.</p>
							</td>
						</tr><tr>
							<td>
								<p>scan &lt;DirectoryPath&gt;</p>
							</td>
							<td colspan="1">
								<p>Scans the files that are located in the specified <i>DirectoryPath</i> for registry keys that might be impacted if 8dot3 short names were stripped from the file names.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>set { &lt;DefaultValue&gt; | &lt;VolumePath&gt;}</p>
							</td>
							<td colspan="1">
								<p>Changes the file system behavior for 8dot3 name creation in the following instances: </p>
								<ul><li class="unordered">
										When <i>DefaultValue</i> is specified, the registry key, <b>HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisable8dot3NameCreationNtfsDisable8dot3NameCreationNtfsDisable8dot3NameCreation</b>, will be set to the <i>DefaultValue</i>.<br><br>
										The <i>DefaultValue</i> can have the following values:<br><br>
										<ul><li>
												
													<b>0</b>: Enables 8dot3 name creation for all volumes on the system.<br><br>
											</li><li>
												
													<b>1</b>: Disables 8dot3 name creation for all volumes on the system.<br><br>
											</li><li>
												
													<b>2</b>: Sets 8dot3 name creation on a per volume basis.<br><br>
											</li><li>
												
													<b>3</b>: Disables 8dot3 name creation for all volumes except the system volume.<br><br>
											</li></ul>
									</li><li class="unordered">
										When a <i>VolumePath</i> is specified, the specified volumes on disk flag 8dot3name properties will be set to enable 8dot3 name creation for a specified volume (<b>0</b>) or set to disable 8dot3 name creation on the specified volume (<b>1</b>).<br><br>
										You must set the default file system behavior for 8dot3 name creation to the value <b>2</b> before you can enable or disable 8dot3 name creation for a specified volume.<br><br>
									</li></ul>
							</td>
						</tr><tr>
							<td>
								<p>strip &lt;DirectoryPath&gt;</p>
							</td>
							<td colspan="1">
								<p>Removes the 8dot3 file names for all files that are located in the specified <i>DirectoryPath</i>. The 8dot3 file name is not removed for any files where the <i>DirectoryPath</i> combined with the file name contains more than 260 characters.</p>
								<p>This command lists, but does not modify the registry keys that point to the files that had 8dot3 file names permanently removed. </p>
								<p>For more information about the effects of permanently removing the 8dot3 file names from files, see <a href="#BKMK_remarks">Remarks</a>.</p>
							</td>
						</tr><tr>
							<td>
								<p>&lt;VolumePath&gt;</p>
							</td>
							<td colspan="1">
								<p>Specifies the drive name followed by a colon or the GUID in the format <b>Volume{</b><i>GUID</i><b>}</b>.</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/f</p>
							</td>
							<td colspan="1">
								<p>Specifies that all files that are located in the specified <i>DirectoryPath</i> will have the 8dot3 file names removed even if there are registry keys that point to files using the 8dot3 file name. In this case, the operation removes the 8dot3 file names, but does not modify any registry keys that point to the files that are using the 8dot3 file names.</p>
								<div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><img class="note" src="../local/Warning.gif">Warning </th></tr><tr><td>
									It is recommended that you back up your directory or volume prior to using the <b>/f</b> parameter because it may lead to unexpected application failures, including the inability to uninstall programs.<p>
								</td></tr></table><p></div>
							</td>
						</tr><tr>
							<td>
								<p>/l [&lt;log file&gt;]</p>
							</td>
							<td colspan="1">
								<p>Specifies a log file where information will be written.</p>
								<p>If the <b>/l</b> parameter is not specified, all information is written to the default log file: </p>
								<p>
									<b>%temp%\8dot3_removal_log@(</b>
									<i>GMT YYYY-MM-DD HH-MM-SS</i>
									<b>).log</b>
								</p>
							</td>
						</tr><tr>
							<td colspan="1">
								<p>/s </p>
							</td>
							<td colspan="1">
								<p>Specifies that the operation should be applied to the subdirectories of the specified <i>DirectoryPath</i>.</p>
							</td>
						</tr><tr>
							<td>
								<p>/t</p>
							</td>
							<td colspan="1">
								<p>Specifies that the removal of 8dot3 file names should be run in test mode. All operations except the actual removal of the 8dot3 file names are performed. You can use test mode to discover which registry keys point to files that use the 8dot3 file names.</p>
							</td>
						</tr><tr>
							<td>
								<p>/v</p>
							</td>
							<td colspan="1">
								<p>Specifies that all information that is written to the log file is also displayed on the command-line.</p>
							</td>
						</tr></table>
				</content></div><a name="BKMK_remarks"></a><a name="de99ab45-1b22-44d0-9c45-4852abbf8d9b#BKMK_remarks"></a><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<ul xmlns=""><li class="unordered">
							Permanently removing 8dot3 file names and not modifying registry keys that point to the 8dot3 file names may lead to unexpected application failures, including the inability to uninstall an application. It is recommended you first back up your directory or volume before you attempt to remove 8dot3 file names.<br><br>
						</li></ul>
				</content></div><a name="BKMK_examples"></a><a name="de99ab45-1b22-44d0-9c45-4852abbf8d9b#BKMK_examples"></a><h2 class="heading">Examples</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<p xmlns="">To query for the disable 8dot3 name behavior for a disk volume that is specified with the GUID, {928842df-5a01-11de-a85c-806e6f6e6963}, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>fsutil 8dot3name query Volume{928842df-5a01-11de-a85c-806e6f6e6963}</pre></td></tr></table></span></div>
					<p xmlns="">You can also query the 8dot3 name behavior by using the <b>behavior</b> subcommand.</p>
					<p xmlns="">To remove 8dot3 file names in the <i>D:\MyData</i> directory and all subdirectories, while writing the information to the log file that is specified as <i>mylogfile.log</i>, type:</p>
					<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>fsutil 8dot3name scan /l mylogfile.log /s d:\MyData</pre></td></tr></table></span></div>
				</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
					<h3 class="subHeading" xmlns="">Additional references</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
							<p xmlns="">
								<a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a>
							</p>
							<p xmlns="">
								<a href="097de37c-812c-47b0-872b-4b55ea32b27f.htm">Fsutil</a>
							</p>
							<p xmlns="">
								<a href="de99ab45-1b22-44d0-9c45-4852abbf8d9b.htm">Fsutil 8dot3name</a>
							</p>
							<p xmlns="">
								<a href="ac19653e-6082-4d73-b4b4-c1b5f907bb05.htm">Fsutil behavior</a>
							</p>
						</content></div>
				</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>