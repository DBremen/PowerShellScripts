<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><meta http-equiv="Content-Type" content="text/html; CHARSET=Windows-1252"><meta name="save" content="history"><title>Sc failure</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"><input type="hidden" id="hiddenScrollOffset"></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Sc failure</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Applies To: Windows Server 2003 R2,Windows 7,Windows Server 2003 with SP2,Windows Server 2003,Windows Vista,Windows Server 2003 with SP1,Windows Server 2008,Windows Server 2008 R2</p>
<p>Specifies one or more actions to take if a service fails.</p>

<p>For examples of how to use this command, see <a href="#BKMK_examples">Examples</a>.</p>
<h2 class="heading">Syntax</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>sc [&lt;ServerName&gt;] failure [&lt;ServiceName&gt;] [reset= &lt;ErrorFreePeriod&gt;] [reboot= &lt;BroadcastMessage&gt;] [command= &lt;CommandLine&gt;] [actions= {"" | {[run/&lt;MS&gt;] | [restart/&lt;MS&gt;] | [reboot/&lt;MS&gt;]}[/...]]</pre></td></tr></table></span></div>
</content></div><h2 class="heading">Parameters</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr>
<th colspan="1">
Parameter
</th>
<th colspan="1">
Description
</th></tr><tr>
<td colspan="1">
<p>&lt;ServerName&gt; </p>
</td>
<td colspan="1">
<p>Specifies the name of the remote server on which the service is located. The name must use the Universal Naming Convention (UNC) format (for example, \\myserver). To run SC.exe locally, omit this parameter.</p>
</td></tr><tr>
<td colspan="1">
<p>&lt;ServiceName&gt; </p>
</td>
<td colspan="1">
<p>Specifies the service name returned by the <b>getkeyname</b> operation.</p>
</td></tr><tr>
<td colspan="1">
<p>reset= &lt;ErrorFreePeriod&gt; </p>
</td>
<td colspan="1">
<p>Specifies the length of the period (in seconds) with no failures after which the failure count should be reset to <b>0</b> (zero). Note that this parameter requires the <b>actions=</b> parameter.</p>
</td></tr><tr>
<td colspan="1">
<p>reboot= &lt;BroadcastMessage&gt; </p>
</td>
<td colspan="1">
<p>Specifies the message to be broadcast when a service fails.</p>
</td></tr><tr>
<td colspan="1">
<p>command= &lt;CommandLine&gt; </p>
</td>
<td colspan="1">
<p>Specifies the command-line command to be run when the specified service fails. For more information about how to run a batch or VBS file on failure, see <a href="#BKMK_remarks">Remarks</a>.</p>
</td></tr><tr>
<td colspan="1">
<p>actions= {"" | {[run/&lt;MS&gt;] | [restart/&lt;MS&gt;] | [reboot/&lt;MS&gt;]}[/...] </p>
</td>
<td colspan="1">
<p>Specifies one or more failure actions and their delay times (in milliseconds), separated by a forward slash (/). Valid actions are <b>run</b>, <b>restart</b>, and <b>reboot</b>. If more than one action is specified, each action must be separated by a forward slash. Use <b>actions= ""</b> to take no action a service fails. Note that this parameter requires the <b>reset=</b> parameter.</p>
</td></tr><tr>
<td colspan="1">
<p>/?</p>
</td>
<td colspan="1">
<p>Displays help at the command prompt.</p>
</td></tr></table>
</content></div><a name="BKMK_remarks"></a><a name="0b2187df-98e3-466e-bf54-805807d9abfa#BKMK_remarks"></a><h2 class="heading">Remarks</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<ul xmlns=""><li class="unordered">
Not all services allow changes to their failure options. Some run as part of a service set.<br><br>
</li><li class="unordered">
To run a batch file when a service fails, specify <b>command=</b> <i>Cmd</i>.exe<b> </b><i>Drive</i>:\<i>FileName</i>.bat, where <i>Drive</i>:\<i>FileName</i>.bat is the fully qualified name of the batch file.<br><br>
</li><li class="unordered">
To run a VBS file when a service fails, specify  <b>command=</b> <i>Cscript</i> <i>Drive</i>:\<i>MyScript</i>.vbs, where <i>Drive</i>:\<i>MyScript</i>.vbs is the fully qualified name of the script file.<br><br>
</li><li class="unordered">
You can specify up to three separate actions with the <b>actions=</b> parameter, to be used the first, second, and third times that a service fails.<br><br>
</li><li class="unordered">
For each command-line option (parameter), the equal sign is part of the option name. <br><br>
</li><li class="unordered">
A space is required between an option and its value (for example, <b>actions= restart</b>). If the space is omitted, the operation will fail.<br><br>
</li></ul>
</content></div><a name="BKMK_examples"></a><a name="0b2187df-98e3-466e-bf54-805807d9abfa#BKMK_examples"></a><h2 class="heading">Examples</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<p xmlns="">The following examples show how you can use the <b>sc failure</b> command:</p>

<div class="code" xmlns=""><span codelanguage="other"><table width="100%" cellspacing="0" cellpadding="0"><tr><th> </th><th><span class="copyCode" onclick="CopyCode(this)" onkeypress="CopyCode_CheckKey(this)" onmouseover="ChangeCopyCodeIcon(this)" onfocusin="ChangeCopyCodeIcon(this)" onmouseout="ChangeCopyCodeIcon(this)" onfocusout="ChangeCopyCodeIcon(this)" tabindex="0"><img class="copyCodeImage" name="ccImage" align="absmiddle" src="../local/copycode.gif">Copy Code</span></th></tr><tr><td colspan="2"><pre>sc failure msftpsvc reset= 30 actions= restart/5000
sc failure dfs reset= 60 command= c:\windows\services\restart_dfs.exe actions= run/5000
sc failure dfs reset= 60 actions= reboot/30000
sc failure dfs reset= 60 reboot= "The Distributed File System service has failed. Because of this, the computer will reboot in 30 seconds."  actions= reboot/30000
sc failure myservice reset= 3600 reboot= "MyService crashed -- rebooting machine" command= "%windir%\MyServiceRecovery.exe" actions= restart/5000/run/10000/reboot/60000</pre></td></tr></table></span></div>
</content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<h4 class="subHeading" xmlns="">Additional references</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
<p xmlns=""><a href="338c0381-ad63-4a4c-bd2c-42c7a93821fe.htm">Command-Line Syntax Key</a></p>
</content></div>
</sections></div>
</sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><hr><p></div></div></body></html>